{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=23)}([function(e,t,n){\"use strict\";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(18),s={};function a(){}function c(e){for(var t=e.length,n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function u(e,t,n){try{return e.f(t)}catch(e){return n._e(e),s}}t.NO=s;var h={_n:a,_e:a,_c:a};function l(e){e._start=function(e){e.next=e._n,e.error=e._e,e.complete=e._c,this.start(e)},e._stop=e.stop}t.NO_IL=h;var p=function(){function e(e,t){this._stream=e,this._listener=t}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),d=function(){function e(e){this._listener=e}return e.prototype.next=function(e){this._listener._n(e)},e.prototype.error=function(e){this._listener._e(e)},e.prototype.complete=function(){this._listener._c()},e}(),m=function(){function e(e){this.type=\"fromObservable\",this.ins=e,this.active=!1}return e.prototype._start=function(e){this.out=e,this.active=!0,this._sub=this.ins.subscribe(new d(e)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),f=function(){function e(e){this.type=\"merge\",this.insArr=e,this.out=s,this.ac=0}return e.prototype._start=function(e){this.out=e;var t=this.insArr,n=t.length;this.ac=n;for(var r=0;r<n;r++)t[r]._add(this)},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=0;n<t;n++)e[n]._remove(this);this.out=s},e.prototype._n=function(e){var t=this.out;t!==s&&t._n(e)},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){if(--this.ac<=0){var e=this.out;if(e===s)return;e._c()}},e}(),v=function(){function e(e,t,n){this.i=e,this.out=t,this.p=n,n.ils.push(this)}return e.prototype._n=function(e){var t=this.p,n=this.out;if(n!==s&&t.up(e,this.i)){for(var r=t.vals,o=r.length,i=Array(o),a=0;a<o;++a)i[a]=r[a];n._n(i)}},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.p;e.out!==s&&0==--e.Nc&&e.out._c()},e}(),b=function(){function e(e){this.type=\"combine\",this.insArr=e,this.out=s,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(e,t){var n=this.vals[t],r=this.Nn?n===s?--this.Nn:this.Nn:0;return this.vals[t]=e,0===r},e.prototype._start=function(e){this.out=e;var t=this.insArr,n=this.Nc=this.Nn=t.length,r=this.vals=new Array(n);if(0===n)e._n([]),e._c();else for(var o=0;o<n;o++)r[o]=s,t[o]._add(new v(o,e,this))},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=this.ils,r=0;r<t;r++)e[r]._remove(n[r]);this.out=s,this.ils=[],this.vals=[]},e}(),g=function(){function e(e){this.type=\"fromArray\",this.a=e}return e.prototype._start=function(e){for(var t=this.a,n=0,r=t.length;n<r;n++)e._n(t[n]);e._c()},e.prototype._stop=function(){},e}(),y=function(){function e(e){this.type=\"fromPromise\",this.on=!1,this.p=e}return e.prototype._start=function(e){var t=this;this.on=!0,this.p.then(function(n){t.on&&(e._n(n),e._c())},function(t){e._e(t)}).then(a,function(e){setTimeout(function(){throw e})})},e.prototype._stop=function(){this.on=!1},e}(),_=function(){function e(e){this.type=\"periodic\",this.period=e,this.intervalID=-1,this.i=0}return e.prototype._start=function(e){var t=this;this.intervalID=setInterval(function(){e._n(t.i++)},this.period)},e.prototype._stop=function(){-1!==this.intervalID&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),w=function(){function e(e,t){this.type=\"debug\",this.ins=e,this.out=s,this.s=a,this.l=\"\",\"string\"==typeof t?this.l=t:\"function\"==typeof t&&(this.s=t)}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s},e.prototype._n=function(e){var t=this.out;if(t!==s){var n=this.s,r=this.l;if(n!==a)try{n(e)}catch(e){t._e(e)}else r?console.log(r+\":\",e):console.log(e);t._n(e)}},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==s&&e._c()},e}(),M=function(){function e(e,t){this.type=\"drop\",this.ins=t,this.out=s,this.max=e,this.dropped=0}return e.prototype._start=function(e){this.out=e,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s},e.prototype._n=function(e){var t=this.out;t!==s&&this.dropped++>=this.max&&t._n(e)},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==s&&e._c()},e}(),x=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.end()},e}(),k=function(){function e(e,t){this.type=\"endWhen\",this.ins=t,this.out=s,this.o=e,this.oil=h}return e.prototype._start=function(e){this.out=e,this.o._add(this.oil=new x(e,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=s,this.oil=h},e.prototype.end=function(){var e=this.out;e!==s&&e._c()},e.prototype._n=function(e){var t=this.out;t!==s&&t._n(e)},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){this.end()},e}(),S=function(){function e(e,t){this.type=\"filter\",this.ins=t,this.out=s,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s},e.prototype._n=function(e){var t=this.out;if(t!==s){var n=u(this,e,t);n!==s&&n&&t._n(e)}},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==s&&e._c()},e}(),D=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.out._n(e)},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.inner=s,this.op.less()},e}(),O=function(){function e(e){this.type=\"flatten\",this.ins=e,this.out=s,this.open=!0,this.inner=s,this.il=h}return e.prototype._start=function(e){this.out=e,this.open=!0,this.inner=s,this.il=h,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==s&&this.inner._remove(this.il),this.out=s,this.open=!0,this.inner=s,this.il=h},e.prototype.less=function(){var e=this.out;e!==s&&(this.open||this.inner!==s||e._c())},e.prototype._n=function(e){var t=this.out;if(t!==s){var n=this.inner,r=this.il;n!==s&&r!==h&&n._remove(r),(this.inner=e)._add(this.il=new D(t,this))}},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){this.open=!1,this.less()},e}(),j=function(){function e(e,t,n){var r=this;this.type=\"fold\",this.ins=n,this.out=s,this.f=function(t){return e(r.acc,t)},this.acc=this.seed=t}return e.prototype._start=function(e){this.out=e,this.acc=this.seed,e._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s,this.acc=this.seed},e.prototype._n=function(e){var t=this.out;if(t!==s){var n=u(this,e,t);n!==s&&t._n(this.acc=n)}},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==s&&e._c()},e}(),R=function(){function e(e){this.type=\"last\",this.ins=e,this.out=s,this.has=!1,this.val=s}return e.prototype._start=function(e){this.out=e,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s,this.val=s},e.prototype._n=function(e){this.has=!0,this.val=e},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==s&&(this.has?(e._n(this.val),e._c()):e._e(new Error(\"last() failed because input stream completed\")))},e}(),T=function(){function e(e,t){this.type=\"map\",this.ins=t,this.out=s,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s},e.prototype._n=function(e){var t=this.out;if(t!==s){var n=u(this,e,t);n!==s&&t._n(n)}},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==s&&e._c()},e}(),A=function(){function e(e){this.type=\"remember\",this.ins=e,this.out=s}return e.prototype._start=function(e){this.out=e,this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=s},e}(),C=function(){function e(e,t){this.type=\"replaceError\",this.ins=t,this.out=s,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s},e.prototype._n=function(e){var t=this.out;t!==s&&t._n(e)},e.prototype._e=function(e){var t=this.out;if(t!==s)try{this.ins._remove(this),(this.ins=this.f(e))._add(this)}catch(e){t._e(e)}},e.prototype._c=function(){var e=this.out;e!==s&&e._c()},e}(),E=function(){function e(e,t){this.type=\"startWith\",this.ins=e,this.out=s,this.val=t}return e.prototype._start=function(e){this.out=e,this.out._n(this.val),this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=s},e}(),I=function(){function e(e,t){this.type=\"take\",this.ins=t,this.out=s,this.max=e,this.taken=0}return e.prototype._start=function(e){this.out=e,this.taken=0,this.max<=0?e._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=s},e.prototype._n=function(e){var t=this.out;if(t!==s){var n=++this.taken;n<this.max?t._n(e):n===this.max&&(t._n(e),t._c())}},e.prototype._e=function(e){var t=this.out;t!==s&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==s&&e._c()},e}(),$=function(){function e(e){this._prod=e||s,this._ils=[],this._stopID=s,this._dl=s,this._d=!1,this._target=s,this._err=s}return e.prototype._n=function(e){var t=this._ils,n=t.length;if(this._d&&this._dl._n(e),1==n)t[0]._n(e);else{if(0==n)return;for(var r=c(t),o=0;o<n;o++)r[o]._n(e)}},e.prototype._e=function(e){if(this._err===s){this._err=e;var t=this._ils,n=t.length;if(this._x(),this._d&&this._dl._e(e),1==n)t[0]._e(e);else{if(0==n)return;for(var r=c(t),o=0;o<n;o++)r[o]._e(e)}if(!this._d&&0==n)throw this._err}},e.prototype._c=function(){var e=this._ils,t=e.length;if(this._x(),this._d&&this._dl._c(),1==t)e[0]._c();else{if(0==t)return;for(var n=c(e),r=0;r<t;r++)n[r]._c()}},e.prototype._x=function(){0!==this._ils.length&&(this._prod!==s&&this._prod._stop(),this._err=s,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=s,this._stopID=s},e.prototype._add=function(e){var t=this._target;if(t!==s)return t._add(e);var n=this._ils;if(n.push(e),!(n.length>1))if(this._stopID!==s)clearTimeout(this._stopID),this._stopID=s;else{var r=this._prod;r!==s&&r._start(this)}},e.prototype._remove=function(e){var t=this,n=this._target;if(n!==s)return n._remove(e);var r=this._ils,o=r.indexOf(e);o>-1&&(r.splice(o,1),this._prod!==s&&r.length<=0?(this._err=s,this._stopID=setTimeout(function(){return t._stopNow()})):1===r.length&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(e,t){if(-1!==t.indexOf(e))return!0;if(e.out===this)return!0;if(e.out&&e.out!==s)return this._hasNoSinks(e.out,t.concat(e));if(e._ils){for(var n=0,r=e._ils.length;n<r;n++)if(!this._hasNoSinks(e._ils[n],t.concat(e)))return!1;return!0}return!1},e.prototype.ctor=function(){return this instanceof N?N:e},e.prototype.addListener=function(e){e._n=e.next||a,e._e=e.error||a,e._c=e.complete||a,this._add(e)},e.prototype.removeListener=function(e){this._remove(e)},e.prototype.subscribe=function(e){return this.addListener(e),new p(this,e)},e.prototype[i.default]=function(){return this},e.create=function(t){if(t){if(\"function\"!=typeof t.start||\"function\"!=typeof t.stop)throw new Error(\"producer requires both start and stop functions\");l(t)}return new e(t)},e.createWithMemory=function(e){return e&&l(e),new N(e)},e.never=function(){return new e({_start:a,_stop:a})},e.empty=function(){return new e({_start:function(e){e._c()},_stop:a})},e.throw=function(t){return new e({_start:function(e){e._e(t)},_stop:a})},e.from=function(t){if(\"function\"==typeof t[i.default])return e.fromObservable(t);if(\"function\"==typeof t.then)return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError(\"Type of input to from() must be an Array, Promise, or Observable\")},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.fromArray(t)},e.fromArray=function(t){return new e(new g(t))},e.fromPromise=function(t){return new e(new y(t))},e.fromObservable=function(t){if(t.endWhen)return t;var n=\"function\"==typeof t[i.default]?t[i.default]():t;return new e(new m(n))},e.periodic=function(t){return new e(new _(t))},e.prototype._map=function(e){return new(this.ctor())(new T(e,this))},e.prototype.map=function(e){return this._map(e)},e.prototype.mapTo=function(e){var t=this.map(function(){return e});return t._prod.type=\"mapTo\",t},e.prototype.filter=function(t){var n,r,o=this._prod;return new e(o instanceof S?new S((n=o.f,r=t,function(e){return n(e)&&r(e)}),o.ins):new S(t,this))},e.prototype.take=function(e){return new(this.ctor())(new I(e,this))},e.prototype.drop=function(t){return new e(new M(t,this))},e.prototype.last=function(){return new e(new R(this))},e.prototype.startWith=function(e){return new N(new E(this,e))},e.prototype.endWhen=function(e){return new(this.ctor())(new k(e,this))},e.prototype.fold=function(e,t){return new N(new j(e,t,this))},e.prototype.replaceError=function(e){return new(this.ctor())(new C(e,this))},e.prototype.flatten=function(){return new e(new O(this))},e.prototype.compose=function(e){return e(this)},e.prototype.remember=function(){return new N(new A(this))},e.prototype.debug=function(e){return new(this.ctor())(new w(this,e))},e.prototype.imitate=function(e){if(e instanceof N)throw new Error(\"A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq\");this._target=e;for(var t=this._ils,n=t.length,r=0;r<n;r++)e._add(t[r]);this._ils=[]},e.prototype.shamefullySendNext=function(e){this._n(e)},e.prototype.shamefullySendError=function(e){this._e(e)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(e){e?(this._d=!0,e._n=e.next||a,e._e=e.error||a,e._c=e.complete||a,this._dl=e):(this._d=!1,this._dl=s)},e.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(new f(t))},e.combine=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(new b(t))},e}();t.Stream=$;var N=function(e){function t(t){var n=e.call(this,t)||this;return n._has=!1,n}return o(t,e),t.prototype._n=function(t){this._v=t,this._has=!0,e.prototype._n.call(this,t)},t.prototype._add=function(e){var t=this._target;if(t!==s)return t._add(e);var n=this._ils;if(n.push(e),n.length>1)this._has&&e._n(this._v);else if(this._stopID!==s)this._has&&e._n(this._v),clearTimeout(this._stopID),this._stopID=s;else if(this._has)e._n(this._v);else{var r=this._prod;r!==s&&r._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(e){return this._map(e)},t.prototype.mapTo=function(t){return e.prototype.mapTo.call(this,t)},t.prototype.take=function(t){return e.prototype.take.call(this,t)},t.prototype.endWhen=function(t){return e.prototype.endWhen.call(this,t)},t.prototype.replaceError=function(t){return e.prototype.replaceError.call(this,t)},t.prototype.remember=function(){return this},t.prototype.debug=function(t){return e.prototype.debug.call(this,t)},t}($);t.MemoryStream=N;var B=$;t.default=B},function(e,t,n){\"use strict\";(function(e){function n(){var t;return(t=\"undefined\"!=typeof window?window:void 0!==e?e:this).Cyclejs=t.Cyclejs||{},(t=t.Cyclejs).adaptStream=t.adaptStream||function(e){return e},t}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setAdapt=function(e){n().adaptStream=e},t.adapt=function(e){return n().adaptStream(e)}}).call(this,n(5))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(4),o=n(17);function i(e,t,n){var i,s,a,c={};if(void 0!==n?(c=t,o.array(n)?i=n:o.primitive(n)?s=n:n&&n.sel&&(i=[n])):void 0!==t&&(o.array(t)?i=t:o.primitive(t)?s=t:t&&t.sel?i=[t]:c=t),void 0!==i)for(a=0;a<i.length;++a)o.primitive(i[a])&&(i[a]=r.vnode(void 0,void 0,void 0,i[a],void 0));return\"s\"!==e[0]||\"v\"!==e[1]||\"g\"!==e[2]||3!==e.length&&\".\"!==e[3]&&\"#\"!==e[3]||function e(t,n,r){if(t.ns=\"http://www.w3.org/2000/svg\",\"foreignObject\"!==r&&void 0!==n)for(var o=0;o<n.length;++o){var i=n[o].data;void 0!==i&&e(i,n[o].children,n[o].sel)}}(c,i,e),r.vnode(e,c,i,s,void 0)}t.h=i,t.default=i},function(e,t,n){\"use strict\";(function(e){var n,r=(\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==e?e:Function(\"return this\")()).Symbol;n=\"function\"==typeof r?r(\"parent\"):\"@@snabbdom-selector-parent\",t.a=n}).call(this,n(5))},function(e,t,n){\"use strict\";function r(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.vnode=r,t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\"use strict\";function r(e,t){var n,r,o=t.elm,i=e.data.class,s=t.data.class;if((i||s)&&i!==s){for(r in s=s||{},i=i||{})s[r]||o.classList.remove(r);for(r in s)(n=s[r])!==i[r]&&o.classList[n?\"add\":\"remove\"](r)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.classModule={create:r,update:r},t.default=t.classModule},function(e,t,n){\"use strict\";function r(e,t){var n,r,o=t.elm,i=e.data.props,s=t.data.props;if((i||s)&&i!==s){for(n in s=s||{},i=i||{})s[n]||delete o[n];for(n in s)r=s[n],i[n]===r||\"value\"===n&&o[n]===r||(o[n]=r)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.propsModule={create:r,update:r},t.default=t.propsModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"http://www.w3.org/1999/xlink\",o=\"http://www.w3.org/XML/1998/namespace\",i=58,s=120;function a(e,t){var n,a=t.elm,c=e.data.attrs,u=t.data.attrs;if((c||u)&&c!==u){for(n in c=c||{},u=u||{}){var h=u[n];c[n]!==h&&(!0===h?a.setAttribute(n,\"\"):!1===h?a.removeAttribute(n):n.charCodeAt(0)!==s?a.setAttribute(n,h):n.charCodeAt(3)===i?a.setAttributeNS(o,n,h):n.charCodeAt(5)===i?a.setAttributeNS(r,n,h):a.setAttribute(n,h))}for(n in c)n in u||a.removeAttribute(n)}}t.attributesModule={create:a,update:a},t.default=t.attributesModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"undefined\"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,o=function(e){r(function(){r(e)})},i=!1;function s(e,t,n){o(function(){e[t]=n})}function a(e,t){var n,r,o=t.elm,i=e.data.style,a=t.data.style;if((i||a)&&i!==a){a=a||{};var c=\"delayed\"in(i=i||{});for(r in i)a[r]||(\"-\"===r[0]&&\"-\"===r[1]?o.style.removeProperty(r):o.style[r]=\"\");for(r in a)if(n=a[r],\"delayed\"===r&&a.delayed)for(var u in a.delayed)n=a.delayed[u],c&&n===i.delayed[u]||s(o.style,u,n);else\"remove\"!==r&&n!==i[r]&&(\"-\"===r[0]&&\"-\"===r[1]?o.style.setProperty(r,n):o.style[r]=n)}}t.styleModule={pre:function(){i=!1},create:a,update:a,destroy:function(e){var t,n,r=e.elm,o=e.data.style;if(o&&(t=o.destroy))for(n in t)r.style[n]=t[n]},remove:function(e,t){var n=e.data.style;if(n&&n.remove){i||(getComputedStyle(document.body).transform,i=!0);var r,o=e.elm,s=0,a=n.remove,c=0,u=[];for(r in a)u.push(r),o.style[r]=a[r];for(var h=getComputedStyle(o)[\"transition-property\"].split(\", \");s<h.length;++s)-1!==u.indexOf(h[s])&&c++;o.addEventListener(\"transitionend\",function(e){e.target===o&&--c,0===c&&t()})}else t()}},t.default=t.styleModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=/[A-Z]/g;function o(e,t){var n,o=t.elm,i=e.data.dataset,s=t.data.dataset;if((i||s)&&i!==s){i=i||{},s=s||{};var a=o.dataset;for(n in i)s[n]||(a?n in a&&delete a[n]:o.removeAttribute(\"data-\"+n.replace(r,\"-$&\").toLowerCase()));for(n in s)i[n]!==s[n]&&(a?a[n]=s[n]:o.setAttribute(\"data-\"+n.replace(r,\"-$&\").toLowerCase(),s[n]))}}t.datasetModule={create:o,update:o},t.default=t.datasetModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(4),o=n(20);function i(e,t){var n,s=void 0!==t?t:o.default;if(s.isElement(e)){var a,c=e.id?\"#\"+e.id:\"\",u=e.getAttribute(\"class\"),h=u?\".\"+u.split(\" \").join(\".\"):\"\",l=s.tagName(e).toLowerCase()+c+h,p={},d=[],m=void 0,f=void 0,v=e.attributes,b=e.childNodes;for(m=0,f=v.length;m<f;m++)\"id\"!==(a=v[m].nodeName)&&\"class\"!==a&&(p[a]=v[m].nodeValue);for(m=0,f=b.length;m<f;m++)d.push(i(b[m],t));return r.default(l,{attrs:p},d,void 0,e)}return s.isText(e)?(n=s.getTextContent(e),r.default(void 0,void 0,void 0,n,e)):s.isComment(e)?(n=s.getTextContent(e),r.default(\"!\",{},[],n,e)):r.default(\"\",{},[],void 0,e)}t.toVNode=i,t.default=i},function(e,t,n){\"use strict\";var r,o=\"object\"==typeof Reflect?Reflect:null,i=o&&\"function\"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&\"function\"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var o,i,s,a;if(\"function\"!=typeof n)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof n);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit(\"newListener\",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if(\"function\"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=u(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error(\"Possible EventEmitter memory leak detected. \"+s.length+\" \"+String(t)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");c.name=\"MaxListenersExceededWarning\",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}.bind(r);return o.listener=n,r.wrapFn=o,o}function p(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:\"function\"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):m(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if(\"function\"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,\"defaultMaxListeners\",{enumerable:!0,get:function(){return c},set:function(e){if(\"number\"!=typeof e||e<0||s(e))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+e+\".\");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if(\"number\"!=typeof e||e<0||s(e))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+e+\".\");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=\"error\"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error(\"Unhandled error.\"+(s?\" (\"+s.message+\")\":\"\"));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if(\"function\"==typeof c)i(c,this,t);else{var u=c.length,h=m(c,u);for(n=0;n<u;++n)i(h[n],this,t)}return!0},a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){if(\"function\"!=typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if(\"function\"!=typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,o,i,s;if(\"function\"!=typeof t)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(\"removeListener\",e,n.listener||t));else if(\"function\"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit(\"removeListener\",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)\"removeListener\"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return\"function\"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){\"use strict\";function r(e){var t,n=e.Symbol;return\"function\"==typeof n?n.observable?t=n.observable:(t=n(\"observable\"),n.observable=t):t=\"@@observable\",t}n.d(t,\"a\",function(){return r})},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),o=function(){function e(e){this.streams=e,this.type=\"concat\",this.out=null,this.i=0}return e.prototype._start=function(e){this.out=e,this.streams[this.i]._add(this)},e.prototype._stop=function(){var e=this.streams;this.i<e.length&&e[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(e){var t=this.out;t&&t._n(e)},e.prototype._e=function(e){var t=this.out;t&&t._e(e)},e.prototype._c=function(){var e=this.out;if(e){var t=this.streams;t[this.i]._remove(this),++this.i<t.length?t[this.i]._add(this):e._c()}},e}();t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new r.Stream(new o(e))}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),o={},i=function(){function e(e,t){this.i=e,this.p=t,t.ils[e]=this}return e.prototype._n=function(e){var t=this.p;t.out!==o&&t.up(e,this.i)},e.prototype._e=function(e){this.p._e(e)},e.prototype._c=function(){this.p.down(this.i,this)},e}();t.SampleCombineListener=i;var s,a=function(){function e(e,t){this.type=\"sampleCombine\",this.ins=e,this.others=t,this.out=o,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(e){this.out=e;for(var t=this.others,n=this.Nn=t.length,r=this.vals=new Array(n),s=0;s<n;s++)r[s]=o,t[s]._add(new i(s,this));this.ins._add(this)},e.prototype._stop=function(){var e=this.others,t=e.length,n=this.ils;this.ins._remove(this);for(var r=0;r<t;r++)e[r]._remove(n[r]);this.out=o,this.vals=[],this.ils=[]},e.prototype._n=function(e){var t=this.out;t!==o&&(this.Nn>0||t._n([e].concat(this.vals)))},e.prototype._e=function(e){var t=this.out;t!==o&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==o&&e._c()},e.prototype.up=function(e,t){var n=this.vals[t];this.Nn>0&&n===o&&this.Nn--,this.vals[t]=e},e.prototype.down=function(e,t){this.others[e]._remove(t)},e}();t.SampleCombineOperator=a,s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return new r.Stream(new a(t,e))}},t.default=s},function(e,t,n){\"use strict\";var r=n(21),o=n(22);function i(e,t){var n=r.default(e,t,{streamAdapter:o.default}),i=n.run,s=n.sinks;return\"undefined\"!=typeof window&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(s),i()}t.run=i;var s=function(e,t){var n=r.default(e,t,{streamAdapter:o.default});return\"undefined\"!=typeof window&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(n.sinks),n};s.run=i,Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=s},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.array=Array.isArray,t.primitive=function(e){return\"string\"==typeof e||\"number\"==typeof e}},function(e,t,n){\"use strict\";n.r(t),function(e,r){var o,i=n(13);o=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==e?e:r;var s=Object(i.a)(o);t.default=s}.call(this,n(5),n(19)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,\"exports\",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.htmlDomApi={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}},t.default=t.htmlDomApi},function(e,t,n){\"use strict\";function r(e,t,n){var r=Object.keys(e).filter(function(e){return!!t[e]}),o={},i={};r.forEach(function(e){o[e]={next:[],error:[],complete:[]},i[e]={next:function(t){return o[e].next.push(t)},error:function(t){return o[e].error.push(t)},complete:function(t){return o[e].complete.push(t)}}});var s=r.map(function(t){return n.streamSubscribe(e[t],{next:function(e){i[t].next(e)},error:function(e){!function(e){var t=e.stack||e;console&&console.error?console.error(t):console&&console.log&&console.log(t)}(e),i[t].error(e)},complete:function(e){i[t].complete(e)}})}).filter(function(e){return\"function\"==typeof e});return r.forEach(function(e){var n=t[e].observer,r=n.next,s=n.error,a=n.complete;o[e].next.forEach(r),o[e].error.forEach(s),o[e].complete.forEach(a),i[e].next=r,i[e].error=s,i[e].complete=a}),function(){s.forEach(function(e){return e()})}}var o=function(e){return 0===Object.keys(e).length};Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e,t,n){if(\"function\"!=typeof e)throw new Error(\"First argument given to Cycle must be the 'main' function.\");if(\"object\"!=typeof t||null===t)throw new Error(\"Second argument given to Cycle must be an object with driver functions as properties.\");if(o(t))throw new Error(\"Second argument given to Cycle must be an object with at least one driver function declared as a property.\");var i=n.streamAdapter;if(!i||o(i))throw new Error(\"Third argument given to Cycle must be an options object with the streamAdapter key supplied with a valid stream adapter.\");var s=function(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=t.makeSubject(),i=(e[r].streamAdapter||t).adapt(o.stream,t.streamSubscribe);n[r]={stream:i,observer:o.observer}}return n}(t,i),a=function(e,t,n){var r={};for(var o in e)if(e.hasOwnProperty(o)){var i=e[o](t[o].stream,n,o),s=e[o].streamAdapter;s&&s.isValidStream(i)?r[o]=n.adapt(i,s.streamSubscribe):r[o]=i,r[o]&&\"object\"==typeof r[o]&&(r[o]._isCycleSource=o)}return r}(t,s,i),c=e(a);return\"undefined\"!=typeof window&&(window.Cyclejs={sinks:c}),{sinks:c,sources:a,run:function(){var e=r(c,s,i);return function(){!function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&\"function\"==typeof e[t].dispose&&e[t].dispose()}(a),e()}}}}},function(e,t,n){\"use strict\";var r=n(0),o={adapt:function(e,t){if(o.isValidStream(e))return e;var n=null;return r.default.create({start:function(r){n=t(e,r)},stop:function(){\"function\"==typeof n&&n()}})},makeSubject:function(){var e=r.default.create();return{observer:{next:function(t){e.shamefullySendNext(t)},error:function(t){e.shamefullySendError(t)},complete:function(){e.shamefullySendComplete()}},stream:e}},remember:function(e){return e.remember()},isValidStream:function(e){return\"function\"==typeof e.addListener&&\"function\"==typeof e.shamefullySendNext},streamSubscribe:function(e,t){return e.addListener(t),function(){return e.removeListener(t)}}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=o},function(t,n,r){\"use strict\";r.r(n);var o=r(12),i=r(2);var s=r(1),a=r(0),u=r.n(a);function l(e,t,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1);var i=null;return a.Stream.create({start:function(s){i=r?function(e){p(e,r),s.next(e)}:function(e){s.next(e)},e.addEventListener(t,i,{capture:n,passive:o})},stop:function(){e.removeEventListener(t,i,n),i=null}})}function p(e,t){if(t)if(\"boolean\"==typeof t)e.preventDefault();else if(\"function\"==typeof t)t(e)&&e.preventDefault();else{if(\"object\"!=typeof t)throw new Error(\"preventDefault has to be either a boolean, predicate function or object\");(function e(t,n){for(var r=Object.keys(t),o=r.length,i=0;i<o;i++){var s=r[i];if(\"object\"==typeof t[s]&&\"object\"==typeof n[s]){if(!e(t[s],n[s]))return!1}else if(t[s]!==n[s])return!1}return!0})(t,e)&&e.preventDefault()}}var m=function(){function e(e){this._name=e}return e.prototype.select=function(e){return this},e.prototype.elements=function(){var e=Object(s.adapt)(u.a.of([document]));return e._isCycleSource=this._name,e},e.prototype.element=function(){var e=Object(s.adapt)(u.a.of(document));return e._isCycleSource=this._name,e},e.prototype.events=function(e,t,n){var r;void 0===t&&(t={}),r=l(document,e,t.useCapture,t.preventDefault);var o=Object(s.adapt)(r);return o._isCycleSource=this._name,o},e}(),f=function(){function e(e){this._name=e}return e.prototype.select=function(e){return this},e.prototype.elements=function(){var e=Object(s.adapt)(u.a.of([document.body]));return e._isCycleSource=this._name,e},e.prototype.element=function(){var e=Object(s.adapt)(u.a.of(document.body));return e._isCycleSource=this._name,e},e.prototype.events=function(e,t,n){var r;void 0===t&&(t={}),r=l(document.body,e,t.useCapture,t.preventDefault);var o=Object(s.adapt)(r);return o._isCycleSource=this._name,o},e}();function v(e){if(\"string\"!=typeof e&&(t=e,!(\"object\"==typeof HTMLElement?t instanceof HTMLElement||t instanceof DocumentFragment:t&&\"object\"==typeof t&&null!==t&&(1===t.nodeType||11===t.nodeType)&&\"string\"==typeof t.nodeName)))throw new Error(\"Given container is not a DOM element neither a selector string.\");var t}function g(e){for(var t=\"\",n=e.length-1;n>=0&&\"selector\"===e[n].type;n--)t=e[n].scope+\" \"+t;return t.trim()}function y(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].type!==t[n].type||e[n].scope!==t[n].scope)return!1;return!0}var _=function(){function e(e,t){this.namespace=e,this.isolateModule=t,this._namespace=e.filter(function(e){return\"selector\"!==e.type})}return e.prototype.isDirectlyInScope=function(e){var t=this.isolateModule.getNamespace(e);if(!t)return!1;if(this._namespace.length>t.length||!y(this._namespace,t.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<t.length;n++)if(\"total\"===t[n].type)return!1;return!0},e}();var w=function(){function e(e,t){this.namespace=e,this.isolateModule=t}return e.prototype.call=function(){var e,t=this.namespace,n=g(t),r=new _(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(e){return\"selector\"!==e.type}));return void 0===o?[]:\"\"===n?[o]:(e=o.querySelectorAll(n),Array.prototype.slice.call(e)).filter(r.isDirectlyInScope,r).concat(o.matches(n)?[o]:[])},e}(),M=function(){return(M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function x(e){return{type:(t=e,t.length>1&&(\".\"===t[0]||\"#\"===t[0])?\"sibling\":\"total\"),scope:e};var t}var k=function(){function e(t,n,r,o,i,s){var a;void 0===r&&(r=[]),this._rootElement$=t,this._sanitation$=n,this._namespace=r,this._isolateModule=o,this._eventDelegator=i,this._name=s,this.isolateSource=function(t,n){return new e(t._rootElement$,t._sanitation$,t._namespace.concat(x(n)),t._isolateModule,t._eventDelegator,t._name)},this.isolateSink=(a=this._namespace,function(e,t){return\":root\"===t?e:e.map(function(e){if(!e)return e;var n=x(t),r=M({},e,{data:M({},e.data,{isolate:e.data&&Array.isArray(e.data.isolate)?e.data.isolate:a.concat([n])})});return M({},r,{key:void 0!==r.key?r.key:JSON.stringify(r.data.isolate)})})})}return e.prototype._elements=function(){if(0===this._namespace.length)return this._rootElement$.map(function(e){return[e]});var e=new w(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return e.call()})},e.prototype.elements=function(){var e=Object(s.adapt)(this._elements().remember());return e._isCycleSource=this._name,e},e.prototype.element=function(){var e=Object(s.adapt)(this._elements().filter(function(e){return e.length>0}).map(function(e){return e[0]}).remember());return e._isCycleSource=this._name,e},Object.defineProperty(e.prototype,\"namespace\",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(\"string\"!=typeof t)throw new Error(\"DOM driver's select() expects the argument to be a string as a CSS selector\");if(\"document\"===t)return new m(this._name);if(\"body\"===t)return new f(this._name);var n=\":root\"===t?[]:this._namespace.concat({type:\"selector\",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,n,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(e,t,n){if(void 0===t&&(t={}),\"string\"!=typeof e)throw new Error(\"DOM driver's events() expects argument to be a string representing the event type to listen for.\");var r=this._eventDelegator.addEventListener(e,this._namespace,t,n),o=Object(s.adapt)(r);return o._isCycleSource=this._name,o},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}();function S(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}var D=S,O=Array.isArray;function j(e){return\"string\"==typeof e||\"number\"==typeof e}var R={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}};function T(e){return void 0===e}function A(e){return void 0!==e}var C=D(\"\",{},[],void 0,void 0);function E(e,t){return e.key===t.key&&e.sel===t.sel}function I(e,t,n){var r,o,i,s={};for(r=t;r<=n;++r)null!=(i=e[r])&&void 0!==(o=i.key)&&(s[o]=r);return s}var $=[\"create\",\"update\",\"remove\",\"destroy\",\"pre\",\"post\"];function N(e,t){var n,r,o={},i=void 0!==t?t:R;for(n=0;n<$.length;++n)for(o[$[n]]=[],r=0;r<e.length;++r){var s=e[r][$[n]];void 0!==s&&o[$[n]].push(s)}function a(e,t){return function(){if(0==--t){var n=i.parentNode(e);i.removeChild(n,e)}}}function c(e,t){var n,r=e.data;void 0!==r&&A(n=r.hook)&&A(n=n.init)&&(n(e),r=e.data);var s=e.children,a=e.sel;if(\"!\"===a)T(e.text)&&(e.text=\"\"),e.elm=i.createComment(e.text);else if(void 0!==a){var u=a.indexOf(\"#\"),h=a.indexOf(\".\",u),l=u>0?u:a.length,p=h>0?h:a.length,d=-1!==u||-1!==h?a.slice(0,Math.min(l,p)):a,m=e.elm=A(r)&&A(n=r.ns)?i.createElementNS(n,d):i.createElement(d);for(l<p&&m.setAttribute(\"id\",a.slice(l+1,p)),h>0&&m.setAttribute(\"class\",a.slice(p+1).replace(/\\./g,\" \")),n=0;n<o.create.length;++n)o.create[n](C,e);if(O(s))for(n=0;n<s.length;++n){var f=s[n];null!=f&&i.appendChild(m,c(f,t))}else j(e.text)&&i.appendChild(m,i.createTextNode(e.text));A(n=e.data.hook)&&(n.create&&n.create(C,e),n.insert&&t.push(e))}else e.elm=i.createTextNode(e.text);return e.elm}function u(e,t,n,r,o,s){for(;r<=o;++r){var a=n[r];null!=a&&i.insertBefore(e,c(a,s),t)}}function h(e){var t,n,r=e.data;if(void 0!==r){for(A(t=r.hook)&&A(t=t.destroy)&&t(e),t=0;t<o.destroy.length;++t)o.destroy[t](e);if(void 0!==e.children)for(n=0;n<e.children.length;++n)null!=(t=e.children[n])&&\"string\"!=typeof t&&h(t)}}function l(e,t,n,r){for(;n<=r;++n){var s=void 0,c=void 0,u=void 0,l=t[n];if(null!=l)if(A(l.sel)){for(h(l),c=o.remove.length+1,u=a(l.elm,c),s=0;s<o.remove.length;++s)o.remove[s](l,u);A(s=l.data)&&A(s=s.hook)&&A(s=s.remove)?s(l,u):u()}else i.removeChild(e,l.elm)}}function p(e,t,n){var r,s;A(r=t.data)&&A(s=r.hook)&&A(r=s.prepatch)&&r(e,t);var a=t.elm=e.elm,h=e.children,d=t.children;if(e!==t){if(void 0!==t.data){for(r=0;r<o.update.length;++r)o.update[r](e,t);A(r=t.data.hook)&&A(r=r.update)&&r(e,t)}T(t.text)?A(h)&&A(d)?h!==d&&function(e,t,n,r){for(var o,s,a,h=0,d=0,m=t.length-1,f=t[0],v=t[m],b=n.length-1,g=n[0],y=n[b];h<=m&&d<=b;)null==f?f=t[++h]:null==v?v=t[--m]:null==g?g=n[++d]:null==y?y=n[--b]:E(f,g)?(p(f,g,r),f=t[++h],g=n[++d]):E(v,y)?(p(v,y,r),v=t[--m],y=n[--b]):E(f,y)?(p(f,y,r),i.insertBefore(e,f.elm,i.nextSibling(v.elm)),f=t[++h],y=n[--b]):E(v,g)?(p(v,g,r),i.insertBefore(e,v.elm,f.elm),v=t[--m],g=n[++d]):(void 0===o&&(o=I(t,h,m)),T(s=o[g.key])?(i.insertBefore(e,c(g,r),f.elm),g=n[++d]):((a=t[s]).sel!==g.sel?i.insertBefore(e,c(g,r),f.elm):(p(a,g,r),t[s]=void 0,i.insertBefore(e,a.elm,f.elm)),g=n[++d]));(h<=m||d<=b)&&(h>m?u(e,null==n[b+1]?null:n[b+1].elm,n,d,b,r):l(e,t,h,m))}(a,h,d,n):A(d)?(A(e.text)&&i.setTextContent(a,\"\"),u(a,null,d,0,d.length-1,n)):A(h)?l(a,h,0,h.length-1):A(e.text)&&i.setTextContent(a,\"\"):e.text!==t.text&&(A(h)&&l(a,h,0,h.length-1),i.setTextContent(a,t.text)),A(s)&&A(r=s.postpatch)&&r(e,t)}}return function(e,t){var n,r,s,a=[];for(n=0;n<o.pre.length;++n)o.pre[n]();for(function(e){return void 0!==e.sel}(e)||(e=function(e){var t=e.id?\"#\"+e.id:\"\",n=e.className?\".\"+e.className.split(\" \").join(\".\"):\"\";return D(i.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}(e)),E(e,t)?p(e,t,a):(r=e.elm,s=i.parentNode(r),c(t,a),null!==s&&(i.insertBefore(s,t.elm,i.nextSibling(r)),l(s,[e],0,0))),n=0;n<a.length;++n)a[n].data.hook.insert(a[n]);for(n=0;n<o.post.length;++n)o.post[n]();return t}}var B=r(14),L=r.n(B),P=r(15),z=r.n(P),F=r(11),q=r(4);var Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Z=\"[\\\\w-]+\",W=\"[ \\t]*\",H=\"[^\\\\]]+\",G=\"(?:=|\\\\$=|\\\\^=|\\\\*=|~=|\\\\|=)\",U=\"(?:(?:[ \\t]+)|\"+(\"(?:\"+W+\"(>)\"+W+\")\")+\"|\"+(\"(?:\"+W+\"(\\\\+)\"+W+\")\")+\"|\"+(\"(?:\"+W+\"(~)\"+W+\")\")+\")\",J=\"(:?\"+Z+\")?\",V=\"(?:\\\\.\"+Z+\")\"+\"|\"+(\"(?:#\"+Z+\")\")+\"|\"+(\"(?:\\\\[\"+W+Z+W+\"(?:\"+G+W+H+W+\")?\\\\])\")+'|:(?:first-child|last-child|nth-child\\\\((?:even|odd|\\\\d*(?:-?n(?:\\\\+\\\\d+)?)?)\\\\)|empty|root|contains\\\\(\"[^\"]*\"\\\\))|'+U,K=new RegExp(\"^\"+U+\"$\");function X(e){var t=e.trim(),n=new RegExp(J,\"y\"),r=n.exec(t)[0],o=new RegExp(V,\"y\");o.lastIndex=n.lastIndex;for(var i=[],s=void 0,a=void 0,c=-1;o.lastIndex<t.length;){var u=o.exec(t);if(!u&&void 0===a)throw new Error(\"Parse error, invalid selector\");if(u&&K.test(u[0])){a=K.exec(u[0])[0],c=o.lastIndex}else{if(void 0!==a){s=[te(a),X(t.substring(c))];break}i.push(u[0])}}var h=i.filter(function(e){return e.startsWith(\".\")}).map(function(e){return e.substring(1)}),l=i.filter(function(e){return e.startsWith(\"#\")}).map(function(e){return e.substring(1)});if(l.length>1)throw new Error(\"Invalid selector, only one id is allowed\");var p=new RegExp(\"(\"+Z+\")\"+W+\"(\"+G+\")?\"+W+\"(\"+H+\")?\"),d=i.filter(function(e){return e.startsWith(\"[\")}).map(function(e){return p.exec(e).slice(1,4)}).map(function(e){var t,n=e[0],r=e[1],o=e[2];return(t={})[n]=[ee(r),o?Y(o):o],t}).reduce(function(e,t){return Q({},e,t)},{}),m=i.filter(function(e){return e.startsWith(\":\")}).map(function(e){return function(e){if(\"first-child\"===e||\"last-child\"===e||\"root\"===e||\"empty\"===e)return[e,void 0];if(e.startsWith(\"contains\")){var t=e.slice(10,-2);return[\"contains\",t]}var n=e.slice(10,-1);\"even\"===n&&(n=\"2n\");\"odd\"===n&&(n=\"2n+1\");return[\"nth-child\",n]}(e.substring(1))});return{id:l[0]||\"\",tag:r,classList:h,attributes:d,nextSelector:s,pseudos:m}}function Y(e){if(e.startsWith('\"'))return e.slice(1,-1);if(\"true\"===e)return!0;if(\"false\"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}function ee(e){switch(e){case\"=\":return\"exact\";case\"^=\":return\"startsWith\";case\"$=\":return\"endsWith\";case\"*=\":return\"contains\";case\"~=\":return\"whitespace\";case\"|=\":return\"dash\";default:return\"has\"}}function te(e){switch(e.trim()){case\">\":return\"child\";case\"+\":return\"nextSibling\";case\"~\":return\"sibling\";default:return\"subtree\"}}function ne(e){return function(t,n){var r=\"object\"==typeof t?t:X(t),o=r.tag,i=r.id,s=r.classList,a=r.attributes,c=r.nextSelector,u=r.pseudos;if(void 0!==c)throw new Error(\"matches can only process selectors that target a single element\");if(!n)return!1;if(o&&o.toLowerCase()!==e.tag(n).toLowerCase())return!1;if(i&&i!==e.id(n))return!1;for(var h=e.className(n).split(\" \"),l=0;l<s.length;l++)if(-1===h.indexOf(s[l]))return!1;for(var p in a){var d=e.attr(n,p),m=a[p][0],f=a[p][1];if(void 0===d)return!1;if(\"has\"===m)return!0;if(\"exact\"===m&&d!==f)return!1;if(\"exact\"!==m){if(\"string\"!=typeof f)throw new Error(\"All non-string values have to be an exact match\");if(\"startsWith\"===m&&!d.startsWith(f))return!1;if(\"endsWith\"===m&&!d.endsWith(f))return!1;if(\"contains\"===m&&-1===d.indexOf(f))return!1;if(\"whitespace\"===m&&-1===d.split(\" \").indexOf(f))return!1;if(\"dash\"===m&&-1===d.split(\"-\").indexOf(f))return!1}}for(l=0;l<u.length;l++){var v=u[l],b=(m=v[0],v[1]);if(\"contains\"===m&&b!==e.contents(n))return!1;if(\"empty\"===m&&(e.contents(n)||0!==e.children(n).length))return!1;if(\"root\"===m&&void 0!==e.parent(n))return!1;if(-1!==m.indexOf(\"child\")){if(!e.parent(n))return!1;var g=e.children(e.parent(n));if(\"first-child\"===m&&0!==g.indexOf(n))return!1;if(\"last-child\"===m&&g.indexOf(n)!==g.length-1)return!1;if(\"nth-child\"===m){var y=/([\\+-]?)(\\d*)(n?)(\\+\\d+)?/.exec(b).slice(1),_=g.indexOf(n);y[0]||(y[0]=\"+\");var w=y[1]?parseInt(y[0]+y[1]):void 0,M=parseInt(y[3]||\"0\");if(w&&\"n\"===y[2]&&_%w!==M)return!1;if(!w&&y[2]&&(\"+\"===y[0]&&_-M<0||\"-\"===y[0]&&_-M>=0))return!1;if(!y[2]&&w&&_!==w-1)return!1}}}return!0}}function re(e){if(!e.sel)return{tagName:\"\",id:\"\",className:\"\"};var t=e.sel,n=t.indexOf(\"#\"),r=t.indexOf(\".\",n),o=n>0?n:t.length,i=r>0?r:t.length;return{tagName:-1!==n||-1!==r?t.slice(0,Math.min(o,i)):t,id:o<i?t.slice(o+1,i):void 0,className:r>0?t.slice(i+1).replace(/\\./g,\" \"):void 0}}function oe(e){var t=re(e).className,n=void 0===t?\"\":t;if(!e.data)return n;var r=e.data,o=r.class,i=r.props;o&&(n+=\" \"+Object.keys(o).filter(function(e){return o[e]}).join(\" \"));return i&&i.className&&(n+=\" \"+i.className),n&&n.trim()}var ie=r(3),se={tag:function(e){return re(e).tagName},className:function(e){return oe(e)},id:function(e){return re(e).id||\"\"},children:function(e){return e.children||[]},parent:function(e){return e.data[ie.a]||e},contents:function(e){return e.text||\"\"},attr:function(e,t){if(e.data){var n=e.data,r=n.attrs,o=void 0===r?{}:r,i=n.props,s=void 0===i?{}:i,a=n.dataset,c=void 0===a?{}:a;if(o[t])return o[t];if(s[t])return s[t];if(0===t.indexOf(\"data-\")&&c[t.slice(5)])return c[t.slice(5)]}}},ae=ne(se);var ce,ue;ce=se,ue=function(e,t){var n=t.data,r=ae.bind(null,e);if(n&&n.fn){var o=void 0;return!!r(o=Array.isArray(n.args)?n.fn.apply(null,n.args):n.args?n.fn.call(null,n.args):n.fn())&&o}return r(t)}||ne(ce);var he=function(){function e(e){this.rootElement=e}return e.prototype.call=function(e){if(11===this.rootElement.nodeType)return this.wrapDocFrag(null===e?[]:[e]);if(null===e)return this.wrap([]);var t=re(e),n=t.tagName,r=t.id,o=oe(e),i=((e.data||{}).props||{}).id,s=void 0===i?r:i;return\"string\"==typeof s&&s.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&o.toUpperCase()===this.rootElement.className.toUpperCase()?e:this.wrap([e])},e.prototype.wrapDocFrag=function(e){return Object(q.vnode)(\"\",{isolate:[]},e,void 0,this.rootElement)},e.prototype.wrap=function(e){var t=this.rootElement,n=t.tagName,r=t.id,o=t.className,s=r?\"#\"+r:\"\",a=o?\".\"+o.split(\" \").join(\".\"):\"\",c=Object(i.h)(\"\"+n.toLowerCase()+s+a,{},e);return c.data=c.data||{},c.data.isolate=c.data.isolate||[],c},e}(),le=r(6),pe=r.n(le),de=r(7),me=r.n(de),fe=r(8),ve=r.n(fe),be=r(9),ge=r.n(be),ye=r(10),_e=r.n(ye),we=[ge.a,pe.a,me.a,ve.a,_e.a],Me=function(){function e(e){this.mapper=e,this.tree=[void 0,{}]}return e.prototype.set=function(e,t,n){for(var r=this.tree,o=void 0!==n?n:e.length,i=0;i<o;i++){var s=this.mapper(e[i]),a=r[1][s];a||(a=[void 0,{}],r[1][s]=a),r=a}r[0]=t},e.prototype.getDefault=function(e,t,n){return this.get(e,t,n)},e.prototype.get=function(e,t,n){for(var r=this.tree,o=void 0!==n?n:e.length,i=0;i<o;i++){var s=this.mapper(e[i]),a=r[1][s];if(!a){if(!t)return;a=[void 0,{}],r[1][s]=a}r=a}return t&&!r[0]&&(r[0]=t()),r[0]},e.prototype.delete=function(e){for(var t=this.tree,n=0;n<e.length-1;n++){var r=t[1][this.mapper(e[n])];if(!r)return;t=r}delete t[1][this.mapper(e[e.length-1])]},e}(),xe=function(){function e(){this.namespaceTree=new Me(function(e){return e.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(e){this.eventDelegator=e},e.prototype.insertElement=function(e,t){this.namespaceByElement.set(t,e),this.namespaceTree.set(e,t)},e.prototype.removeElement=function(e){this.namespaceByElement.delete(e);var t=this.getNamespace(e);t&&this.namespaceTree.delete(t)},e.prototype.getElement=function(e,t){return this.namespaceTree.get(e,void 0,t)},e.prototype.getRootElement=function(e){if(this.namespaceByElement.has(e))return e;for(var t=e;!this.namespaceByElement.has(t);){if(!(t=t.parentNode))return;if(\"HTML\"===t.tagName)throw new Error(\"No root element found, this should not happen at all\")}return t},e.prototype.getNamespace=function(e){var t=this.getRootElement(e);if(t)return this.namespaceByElement.get(t)},e.prototype.createModule=function(){var e=this;return{create:function(t,n){var r=n.elm,o=n.data,i=(void 0===o?{}:o).isolate;Array.isArray(i)&&e.insertElement(i,r)},update:function(t,n){var r=t.elm,o=t.data,i=void 0===o?{}:o,s=n.elm,a=n.data,c=void 0===a?{}:a,u=i.isolate,h=c.isolate;y(u,h)||Array.isArray(u)&&e.removeElement(r),Array.isArray(h)&&e.insertElement(h,s)},destroy:function(t){e.vnodesBeingRemoved.push(t)},remove:function(t,n){e.vnodesBeingRemoved.push(t),n()},post:function(){for(var t=e.vnodesBeingRemoved,n=t.length-1;n>=0;n--){var r=t[n],o=void 0!==r.data?r.data.isolation:void 0;void 0!==o&&e.removeElement(o),e.eventDelegator.removeElement(r.elm,o)}e.vnodesBeingRemoved=[]}}},e}(),ke=function(){function e(){this.toDelete=[],this.toDeleteSize=0,this._set=new Set}return e.prototype.add=function(e){this._set.add(e)},e.prototype.forEach=function(e){this._set.forEach(e),this.flush()},e.prototype.delete=function(e){this.toDelete.length===this.toDeleteSize?this.toDelete.push(e):this.toDelete[this.toDeleteSize]=e,this.toDeleteSize++},e.prototype.flush=function(){for(var e=0;e<this.toDelete.length;e++)e<this.toDeleteSize&&this._set.delete(this.toDelete[e]),this.toDelete[e]=void 0;this.toDeleteSize=0},e}(),Se=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(e,t){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<t)return this.arr.splice(n,0,e),void this.prios.splice(n,0,t);this.arr.push(e),this.prios.push(t)},e.prototype.forEach=function(e){for(var t=0;t<this.arr.length;t++)e(this.arr[t],t,this.arr)},e.prototype.delete=function(e){for(var t=0;t<this.arr.length;t++)if(this.arr[t]===e)return this.arr.splice(t,1),void this.prios.splice(t,1)},e}(),De=function(){return(De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Oe=[\"blur\",\"canplay\",\"canplaythrough\",\"durationchange\",\"emptied\",\"ended\",\"focus\",\"load\",\"loadeddata\",\"loadedmetadata\",\"mouseenter\",\"mouseleave\",\"pause\",\"play\",\"playing\",\"ratechange\",\"reset\",\"scroll\",\"seeked\",\"seeking\",\"stalled\",\"submit\",\"suspend\",\"timeupdate\",\"unload\",\"volumechange\",\"waiting\"],je=function(){function e(e,t){var n=this;this.rootElement$=e,this.isolateModule=t,this.virtualListeners=new Me(function(e){return e.scope}),this.nonBubblingListenersToAdd=new ke,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,e.addListener({next:function(e){n.origin!==e&&(n.origin=e,n.resetEventListeners(),n.domListenersToAdd.forEach(function(e,t){return n.setupDOMListener(t,e)}),n.domListenersToAdd.clear()),n.resetNonBubblingListeners(),n.nonBubblingListenersToAdd.forEach(function(e){n.setupNonBubblingListener(e)})}})}return e.prototype.addEventListener=function(e,t,n,r){var o=u.a.never(),i=new _(t,this.isolateModule),s=this.insertListener(o,i,e,n);if(void 0===r?-1===Oe.indexOf(e):r)this.domListeners.has(e)||this.setupDOMListener(e,!!n.passive);else{var a=new w(t,this.isolateModule);this.setupNonBubblingListener([e,a,s])}return o},e.prototype.removeElement=function(e,t){void 0!==t&&this.virtualListeners.delete(t);var n=[];this.nonBubblingListeners.forEach(function(t,r){t.has(e)&&n.push([r,e])});for(var r=0;r<n.length;r++){var o=this.nonBubblingListeners.get(n[r][0]);o&&(o.delete(n[r][1]),0===o.size?this.nonBubblingListeners.delete(n[r][0]):this.nonBubblingListeners.set(n[r][0],o))}},e.prototype.insertListener=function(e,t,n,r){var o=[],i=t._namespace,s=i.length;do{o.push(this.getVirtualListeners(n,i,!0,s)),s--}while(s>=0&&\"total\"!==i[s].type);for(var a=De({},r,{scopeChecker:t,subject:e,bubbles:!!r.bubbles,useCapture:!!r.useCapture,passive:!!r.passive}),c=0;c<o.length;c++)o[c].add(a,i.length);return a},e.prototype.getVirtualListeners=function(e,t,n,r){void 0===n&&(n=!1);var o=void 0!==r?r:t.length;if(!n)for(var i=o-1;i>=0;i--){if(\"total\"===t[i].type){o=i+1;break}o=i}var s=this.virtualListeners.getDefault(t,function(){return new Map},o);return s.has(e)||s.set(e,new Se),s.get(e)},e.prototype.setupDOMListener=function(e,t){var n=this;if(this.origin){var r=l(this.origin,e,!1,!1,t).subscribe({next:function(r){return n.onEvent(e,r,t)},error:function(){},complete:function(){}});this.domListeners.set(e,{sub:r,passive:t})}else this.domListenersToAdd.set(e,t)},e.prototype.setupNonBubblingListener=function(e){var t=this,n=e[0],r=e[1],o=e[2];if(this.origin){var i=r.call()[0];if(i){this.nonBubblingListenersToAdd.delete(e);var s=l(i,n,!1,!1,o.passive).subscribe({next:function(e){return t.onEvent(n,e,!!o.passive,!1)},error:function(){},complete:function(){}});this.nonBubblingListeners.has(n)||this.nonBubblingListeners.set(n,new Map);var a=this.nonBubblingListeners.get(n);if(!a)return;a.set(i,{sub:s,destination:o})}else this.nonBubblingListenersToAdd.add(e)}else this.nonBubblingListenersToAdd.add(e)},e.prototype.resetEventListeners=function(){for(var e=this.domListeners.entries(),t=e.next();!t.done;){var n=t.value,r=n[0],o=n[1],i=o.sub,s=o.passive;i.unsubscribe(),this.setupDOMListener(r,s),t=e.next()}},e.prototype.resetNonBubblingListeners=function(){var e,t=this,n=new Map,r=(e=n,function(t,n,r){var o;e.has(t)?(o=e.get(t)).set(n,r):((o=new Map).set(n,r),e.set(t,o))});this.nonBubblingListeners.forEach(function(e,o){e.forEach(function(e,n){if(document.body.contains(n))r(o,n,e);else{var i=e.sub,s=e.destination;i&&i.unsubscribe();var a=new w(s.scopeChecker.namespace,t.isolateModule).call()[0],c=l(a,o,!1,!1,s.passive).subscribe({next:function(e){return t.onEvent(o,e,!!s.passive,!1)},error:function(){},complete:function(){}});r(o,a,{sub:c,destination:s})}}),t.nonBubblingListeners=n})},e.prototype.putNonBubblingListener=function(e,t,n,r){var o=this.nonBubblingListeners.get(e);if(o){var i=o.get(t);i&&i.destination.passive===r&&i.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=i.destination)}},e.prototype.onEvent=function(e,t,n,r){void 0===r&&(r=!0);var o=this.patchEvent(t),i=this.isolateModule.getRootElement(t.target);if(r){var s=this.isolateModule.getNamespace(t.target);if(!s)return;var a=this.getVirtualListeners(e,s);this.bubble(e,t.target,i,o,a,s,s.length-1,!0,n),this.bubble(e,t.target,i,o,a,s,s.length-1,!1,n)}else this.putNonBubblingListener(e,t.target,!0,n),this.doBubbleStep(e,t.target,i,o,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(e,t.target,!1,n),this.doBubbleStep(e,t.target,i,o,this.virtualNonBubblingListener,!1,n),t.stopPropagation()},e.prototype.bubble=function(e,t,n,r,o,i,s,a,c){a||r.propagationHasBeenStopped||this.doBubbleStep(e,t,n,r,o,a,c);var u=n,h=s;if(t===n){if(!(s>=0&&\"sibling\"===i[s].type))return;u=this.isolateModule.getElement(i,s),h--}t.parentNode&&u&&this.bubble(e,t.parentNode,u,r,o,i,h,a,c),a&&!r.propagationHasBeenStopped&&this.doBubbleStep(e,t,n,r,o,a,c)},e.prototype.doBubbleStep=function(e,t,n,r,o,i,s){n&&(this.mutateEventCurrentTarget(r,t),o.forEach(function(e){if(e.passive===s&&e.useCapture===i){var o=g(e.scopeChecker.namespace);!r.propagationHasBeenStopped&&e.scopeChecker.isDirectlyInScope(t)&&(\"\"!==o&&t.matches(o)||\"\"===o&&t===n)&&(p(r,e.preventDefault),e.subject.shamefullySendNext(r))}}))},e.prototype.patchEvent=function(e){var t=e;t.propagationHasBeenStopped=!1;var n=t.stopPropagation;return t.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},t},e.prototype.mutateEventCurrentTarget=function(e,t){try{Object.defineProperty(e,\"currentTarget\",{value:t,configurable:!0})}catch(e){console.log(\"please use event.ownerTarget\")}e.ownerTarget=t},e}();function Re(e){return u.a.merge(e,u.a.never())}function Te(e){return e.elm}function Ae(e){(console.error||console.log)(e)}!function(){function e(e){this._mockConfig=e,e.elements?this._elements=e.elements:this._elements=Object(s.adapt)(u.a.empty())}e.prototype.elements=function(){var e=this._elements;return e._isCycleSource=\"MockedDOM\",e},e.prototype.element=function(){var e=this.elements().filter(function(e){return e.length>0}).map(function(e){return e[0]}).remember(),t=Object(s.adapt)(e);return t._isCycleSource=\"MockedDOM\",t},e.prototype.events=function(e,t,n){var r=this._mockConfig[e],o=Object(s.adapt)(r||u.a.empty());return o._isCycleSource=\"MockedDOM\",o},e.prototype.select=function(t){return new e(this._mockConfig[t]||{})},e.prototype.isolateSource=function(e,t){return e.select(\".___\"+t)},e.prototype.isolateSink=function(e,t){return Object(s.adapt)(u.a.fromObservable(e).map(function(e){return e.sel&&-1!==e.sel.indexOf(\"___\"+t)?e:(e.sel+=\".___\"+t,e)}))}}();function Ce(e){return function(e){return\"string\"==typeof e&&e.length>0}(e)&&(\".\"===e[0]||\"#\"===e[0])}function Ee(e){return function(t,n,r){var o=void 0!==t,s=void 0!==n,a=void 0!==r;return Ce(t)?s&&a?Object(i.h)(e+t,n,r):s?Object(i.h)(e+t,n):Object(i.h)(e+t,{}):a?Object(i.h)(e+t,n,r):s?Object(i.h)(e,t,n):o?Object(i.h)(e,t):Object(i.h)(e,{})}}var Ie=[\"a\",\"altGlyph\",\"altGlyphDef\",\"altGlyphItem\",\"animate\",\"animateColor\",\"animateMotion\",\"animateTransform\",\"circle\",\"clipPath\",\"colorProfile\",\"cursor\",\"defs\",\"desc\",\"ellipse\",\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDistantLight\",\"feFlood\",\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMergeNode\",\"feMorphology\",\"feOffset\",\"fePointLight\",\"feSpecularLighting\",\"feSpotlight\",\"feTile\",\"feTurbulence\",\"filter\",\"font\",\"fontFace\",\"fontFaceFormat\",\"fontFaceName\",\"fontFaceSrc\",\"fontFaceUri\",\"foreignObject\",\"g\",\"glyph\",\"glyphRef\",\"hkern\",\"image\",\"line\",\"linearGradient\",\"marker\",\"mask\",\"metadata\",\"missingGlyph\",\"mpath\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialGradient\",\"rect\",\"script\",\"set\",\"stop\",\"style\",\"switch\",\"symbol\",\"text\",\"textPath\",\"title\",\"tref\",\"tspan\",\"use\",\"view\",\"vkern\"],$e=Ee(\"svg\");Ie.forEach(function(e){$e[e]=Ee(e)});var Ne=[\"a\",\"abbr\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"base\",\"bdi\",\"bdo\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"cite\",\"code\",\"col\",\"colgroup\",\"dd\",\"del\",\"details\",\"dfn\",\"dir\",\"div\",\"dl\",\"dt\",\"em\",\"embed\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"keygen\",\"label\",\"legend\",\"li\",\"link\",\"main\",\"map\",\"mark\",\"menu\",\"meta\",\"nav\",\"noscript\",\"object\",\"ol\",\"optgroup\",\"option\",\"p\",\"param\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"script\",\"section\",\"select\",\"small\",\"source\",\"span\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"title\",\"tr\",\"u\",\"ul\",\"video\"],Be={SVG_TAG_NAMES:Ie,TAG_NAMES:Ne,svg:$e,isSelector:Ce,createTagFunction:Ee};Ne.forEach(function(e){Be[e]=Ee(e)});var Le=Be,Pe=(Le.svg,Le.a),ze=(Le.abbr,Le.address,Le.area,Le.article,Le.aside,Le.audio,Le.b,Le.base,Le.bdi,Le.bdo,Le.blockquote,Le.body,Le.br,Le.button,Le.canvas,Le.caption,Le.cite,Le.code,Le.col,Le.colgroup,Le.dd,Le.del,Le.dfn,Le.dir,Le.div,Le.dl,Le.dt,Le.em,Le.embed,Le.fieldset,Le.figcaption,Le.figure,Le.footer,Le.form,Le.h1,Le.h2,Le.h3,Le.h4,Le.h5,Le.h6,Le.head,Le.header,Le.hgroup,Le.hr,Le.html,Le.i,Le.iframe,Le.img,Le.input,Le.ins,Le.kbd,Le.keygen,Le.label,Le.legend,Le.li,Le.link,Le.main,Le.map,Le.mark,Le.menu,Le.meta,Le.nav,Le.noscript,Le.object,Le.ol,Le.optgroup,Le.option,Le.p);Le.param,Le.pre,Le.progress,Le.q,Le.rp,Le.rt,Le.ruby,Le.s,Le.samp,Le.script,Le.section,Le.select,Le.small,Le.source,Le.span,Le.strong,Le.style,Le.sub,Le.sup,Le.table,Le.tbody,Le.td,Le.textarea,Le.tfoot,Le.th,Le.thead,Le.title,Le.tr,Le.u,Le.ul,Le.video;function Fe(e){return function t(n){return 0===arguments.length||function(e){return null!=e&&\"object\"==typeof e&&!0===e[\"@@functional/placeholder\"]}(n)?t:e.apply(this,arguments)}}var qe=Fe(function(e){return null===e?\"Null\":void 0===e?\"Undefined\":Object.prototype.toString.call(e).slice(8,-1)});function Qe(e,t,n,r){var o,i=function(o){for(var i=t.length,s=0;s<i;){if(e===t[s])return n[s];s+=1}for(var a in t[s+1]=e,n[s+1]=o,e)o[a]=r?Qe(e[a],t,n,!0):e[a];return o};switch(qe(e)){case\"Object\":return i({});case\"Array\":return i([]);case\"Date\":return new Date(e.valueOf());case\"RegExp\":return o=e,new RegExp(o.source,(o.global?\"g\":\"\")+(o.ignoreCase?\"i\":\"\")+(o.multiline?\"m\":\"\")+(o.sticky?\"y\":\"\")+(o.unicode?\"u\":\"\"));default:return e}}var Ze=Fe(function(e){return null!=e&&\"function\"==typeof e.clone?e.clone():Qe(e,[],[],!0)}),We=r(16);var He=Object(i.h)(\"pre\",\"    function MonadState(g, state) {\\n      this.id = g;\\n      this.s = state;\\n      this.bnd = (func, ...args) => func(this.s, ...args);  \\n    };\\n\\n    var primesMonad = new MonadState('primesMonad', [3, [], 3, [2,3]]);\\n    Object.freeze(primesMonad);\\n\\n    function isPrime(n) {\\n       if (isNaN(n) || !isFinite(n) || n%1 || n<2) return false;\\n       var m = Math.sqrt(n);\\n       for (var i=2;i<=m;i++) if (n%i==0) return false;\\n       return true;\\n    }\\n\\n    function *gen(x) {\\n      var x = x\\n      while(true) {\\n        if(isPrime(x)) yield x;\\n        x++;\\n      }\\n    }\\n\\n    var primesIt = gen(primesMonad.s[2]+1);\\n\\n    function execP (state, num) {   // This function is used to update primesMonad.\\n      var x = state[2];\\n      var primes = state[3].slice();\\n      if (x < num) {\\n        var end = 0;\\n        while (end < num) {\\n          primes.push(primesIt.next().value);\\n          end = primes[primes.length - 1];\\n        }\\n        return [end, primes, end, primes]\\n      }\\n      else {\\n        var number = primes.indexOf(num) + 1;\\n        var newP = primes.slice(number);\\n        return [newP[newP.length - 1], newP, x, primes];\\n      }\\n    }  \"),Ge=Object(i.h)(\"pre\",\"    const workerB$ = sources.WWB.map(m => {\\n      console.log('In workerB$ stream in the main thread. m, m[3] ', m, m.data[3] );\\n      if (m.data[3] === 'color') {  // Updates the color display.\\n        fill1Monad.ret(m.data[0]);\\n        fill2Monad.ret(m.data[1]);\\n        fill3Monad.ret(m.data[2]);\\n        mMprimeBlurb.ret(m.data[5]);\\n        mMfibBlurb.ret(m.data[4]);\\n        mMprimeFibBlurb.ret(m.data[6]);  \\n      }\\n      else {\\n        console.log('m.data[3] ********************', m.data[3] );\\n        mMelapsed.ret(elapsed(m.data[0][3]))\\n        .bnd(v =>  console.log(v));\\n        mMres.ret(m.data[0])\\n        window['primesMonad'] = new MonadState('primesMonad', m.data[1], primes_state);\\n      }\\n    }); \"),Ue=Object(i.h)(\"pre\",\"    var fibKeyPress5$ = sources.DOM\\n        .select('input#fib92').events('keyup');\\n\\n    var primeFib$ = fibKeyPress5$.map(e => {\\n      workerB.postMessage([primesMonad.s, e.target.value]);\\n    });   \"),Je=Object(i.h)(\"pre\",\"    execF(ar[1]).bnd(fpTransformer, ar[0], x)  \");const Ve=Object(i.h)(\"pre\",{style:{color:\"#AFEEEE\"}},\"  var MonadItter = function MonadItter() {\\n    this.p = function () {};\\n    this.release = function () {\\n      return this.p.apply(this, arguments);\\n    };\\n    this.bnd = function (func) {\\n      return this.p = func;\\n    };\\n  }; \");var Ke=Object(i.h)(\"pre\",'  var solve = function solve () {\\n     mMZ3.bnd(a => {\\n     mMquad4.ret(\\'\\');\\n     mMquad6.ret(\\'\\');\\n     mMquad5.ret(a + \" * x * x \")\\n     mMZ3.bnd(b => {\\n     mMquad6.ret(b + \\' * x \\')\\n     mMZ3.bnd(c => {\\n     mMtemp.ret([a,b,c])\\n    .bnd(gMap, qS4,\\'mMtemp2\\')\\n    .bnd(result => {\\n      let x = result[0]\\n      let y = result[1]\\n      if (x === 0) {\\n        mMquad5.ret(\\'No solution\\', mMtemp)\\n        mMquad6.ret(\\' \\');\\n        solve();\\n        return;\\n      }\\n      if (y === 0) {\\n        mMquad5.ret(\\'No solution\\')\\n        mMquad6.ret(\\' \\')\\n        solve();\\n        return;\\n      };\\n      mMquad4.ret(\"Solutiions for \" + a + \", \" + b + \" and \" + c + \" are \" + x + \" and  \" + y)\\n      mMquad5.ret(p(a).text + \" * \" + x + \" * \" + x + \" + \" + p(b).text +\\n              \" * \" + x + \" \" + p(c).text + \" = 0\")\\n      mMquad6.ret(p(a).text + \" * \" + y + \" * \" + y + \" + \" + p(b).text +\\n              \" * \" + y + \" \" + p(c).text + \" = 0\")\\n      solve();   // Continuing the endless loop.\\n      }) }) }) })\\n  };\\n  solve(); '),Xe=Object(i.h)(\"pre\",\"  function gMap(x, f, id) {\\n    var mon = new Monad(f(x), id);\\n    window[id] = mon;\\n    return mon;\\n  }\\n\\n  var qS1 = function qS1(a, b, c) {\\n      var n = (b * (-1)) + (Math.sqrt(b * b - 4 * a * c));\\n      if (n != n) {\\n          return 0;\\n      }\\n      return n / (2 * a);\\n  };\\n  var qS2 = function qS2(a, b, c) {\\n      var n = (b * (-1)) - (Math.sqrt(b * b - 4 * a * c));\\n      if (n != n) {\\n          return 0;\\n      }\\n      return n / (2 * a);\\n  };\\n  var qS3 = function qS3(a, b, c) {\\n      return [qS1(a, b, c), qS2(a, b, c)];\\n  };\\n      var qS4 = function qS4 ([x,y,z]) {\\n        let [a,b,c] = [numProtect(x),numProtect(y),numProtect(z)]\\n        return [qS1(a,b,c), qS2(a,b,c)]\\n      }\\n\\n  var qS4 = function qS4(_a) {\\n      var x = _a[0], y = _a[1], z = _a[2];\\n      var _b = [x, y, z], a = _b[0], b = _b[1], c = _b[2];\\n      return qS3(a, b, c);\\n  };\\n\\n  var quad$ = sources.DOM\\n      .select('#quad').events('keypress');\\n\\n  var quadAction$ = quad$.map(function (e) {\\n      if (e.keyCode === 13) {\\n          mMZ3.release(e.target.value);\\n          document.getElementById('quad').value = null;\\n      }\\n  }); \"),Ye=Object(i.h)(\"div\",[Object(i.h)(\"h1\",\"The Monads\"),Object(i.h)(\"p\",\" The definition of Monad, which is the basic monad constructor, is a little complicated. It isn't intended as a puzzle, so a little explanation is in order. \"),Object(i.h)(\"p\",' The term \"monad\" will mean \"instance of Monad\". Monad could have been defined as a class, but the current definition suffices. '),Object(i.h)(\"p\",' Monads are created by code such as \"const m = new Monad(\"anything\", \"m\")\". The arguments will be the values of m.x and m.id. The first argument can be any Javascript value, such as string, array, or monad. The second argument should be the name of the monad. '),Object(i.h)(\"p\",' A monad, say \"m\", can be replaced by another monad named \"m\" in the global space through the use of the method \"ret()\". It looks like m.x gets mutated, but that isn\\'t what happens. Previously defined references to m retain their values, as demonstrated below: '),Object(i.h)(\"pre\",\"var m = new Monad (5, 'm');\\nvar arr = [m];\\nvar p = m;\\nm.ret(100);\\nconsole.log(m.x, arr[0].x, p.x);\\n// 100, 5, 5\\n\"),Object(i.h)(\"p\",\" In global scope (window in the browser), m.x changed to 100; but p and arr still refer to 5, the previous value of m.x. Similarly, when a monad uses its bnd() method to modify its x attribute, the change is seen globally, but nowhere else. Previous references to the monad remain stable, as this example illustrates: \"),Object(i.h)(\"pre\",\"var m = new Monad (5, 'm');\\nvar arr = [m];\\nvar p = m;\\nm.bnd(add,95);\\nconsole.log(m.x, arr[0].x, p.x);\\n// 100, 5, 5\\n\"),Object(i.h)(\"p\",\" Had there been no reference to m, the previous instance would have been subject to removal by the garbage collector. \"),Object(i.h)(\"p\",\" It is possible to mutate monads with code such as m.x = 888. That might be a good thing to do in a function with many recursions, but it seems like a misuse of monads. Monads are never mutated on this website. Object.freeze() is used to prevent mutation in the definition of primesMonad (shown below). \"),Object(i.h)(\"p\",' The bnd() method can leave the calling monad\\'s global value unchanged while assigning a value (in the global space) to another previously defined monad, or to a freshly created monad. So regardless of whether or not \"m2\" is defined, m.ret(4).bnd(cube,\"$m2\") causes m.x === 4 and m2.x === 64 to both return true. '),Object(i.h)(\"pre\",'m.ret(4).bnd(cube,\"$m2\")\\nconsole.log(m.x, m2.x)   // 4 64\\nm.ret(0).bnd(add,3,\"$m2\").bnd(cube,\"$m3\")\\nconsole.log(m.x, m2.x, m3.x)  // 0 3 27\\n'),Object(i.h)(\"p\",' The definition of Monad (below) shows how bnd() checks to see if func(m.x, ...args) returns a monad. If it does, \"testPrefix\" looks for a pattern that matches \"$val\" in the arguments that were provided to m.bnd(func, ...args). If the pattern is found, the global space acquires a monad named \"val\" with val.x === func(m.x, ...args). If no monad named \"val\" previously existed, one is created. Otherwise, val\\'s global definition gets superseded. val can be any sequence of characters that constitute a valid javascript identifier. '),Object(i.h)(\"p\",\" Instances of Monad facilitate changing values without mutation. They also provide a way to chain function calls. For example, m.ret(2).bnd(add, 1).bnd(cube) causes m.x === 27 to return true. This works because ret(), add, and cube all return monads when they are applied to m.x. The definition of add and cube are shown below and can be found in the Github repository. \"),Object(i.h)(\"p\",\" If the three numbers from the previous sequence were all that we required, we could obtain them more efficiently by running: \"),Object(i.h)(\"pre\",\"var demoResult = ret(0).bnd(x => add(x, 3).bnd(y => cube(y).bnd(z => [x,y,z])));\\nconsole.log('We started with', demoResult[0], \\n    'and got', demoResult[1], 'and', demoResult[2]);\\nThe console displays \\\"We started with 0 and got 3 and 27\\\"\\n\"),Object(i.h)(\"p\",' Doing it that was leaves only one monad - the one named \"temp\" - for the garbage collector. It also eliminates concern about name collisions among the monads. There is little danger that a monad named \"temp\" is being used to store a value somewhere else in the application code. The temp monad is obviously not a monad for preserving values. The result could have been logged to the console or used in further computations without creating a reference to it.'),Object(i.h)(\"pre\",\"ret(0).bnd(x => add(x, 3).bnd(y => cube(y).bnd(z =>\\nconsole.log('We started with', x, 'and got', y, 'and', z))));\\nThe console displays \\\"We started with 0 and got 3 and 27\\\"\\n\"),Object(i.h)(\"p\",\" More complex, multi-stage computations in sequenced monads are demonstrated later in this presentation. If such monads don't depend on information that exists outside of their scope, their effects in a running application are easier to grasp, and opportunities for unintended behavior in edge cases are minimized. Developers can gain further control and confidence in their applications by allowing only the last monad in any sequence to make changes in global scope. Code is easier to write and maintain when you can readily pinpoint a minimal number of places where an application's state gets updated. \"),Object(i.h)(\"p\",\" So, with that out of the way, here are the definitions of Monad and testPrefix: \"),Object(i.h)(\"h3\",\" Monad \"),Object(i.h)(\"pre\",\"  var Monad = function Monad(z = 42, g = 'generic') {\\n    this.x = z;\\n    this.id = g;\\n    this.bnd = function (func, ...args) {\\n      var m = func(this.x, ...args)\\n      var mon;\\n      if (m instanceof Monad) {\\n        mon = testPrefix(args,this.id);\\n        return window[mon] = new Monad(m.x, mon);\\n      }\\n      else return m;\\n    };\\n    this.ret = function (a) {\\n      return window[_this.id] = new Monad(a,_this.id);\\n    };\\n  };\\n  function testPrefix (x,y) {\\n    var t = y;\\n    var s;\\n    if (Array.isArray(x)) {\\n      x.some(v => {\\n        if (typeof v === 'string' && v.charAt() === '$') {\\n           t = v.slice(1, v.length);\\n        }\\n      })\\n    }\\n    return t;\\n  }  \")]),et=(Object(i.h)(\"div\",[Object(i.h)(\"h3\",\"Variations on the Theme\"),Object(i.h)(\"p\",\" Variations on the Monad theme serve diverse purposes. Instances of MonadState preserve computations so they won't have to be performed again. An instance of MonadState2 keeps a record of game play allowing players to back up and resume play from a previous display of numbers. It also keeps the current game parameters - score, goals, operator, selected numbers, and remaining numbers - in a single array which is stored in the archive whenever a new state is created. MonadItter instances are used to parse websockets messages and organize the callbacks neatly. MonadEr catches NaN and prefents crashes when undefined variables are encountered. I defined a message emitting monad but it seemed useless in this Cycle application where reactivity is pervasive. When you want to emit and listen for messages, it is better to build a driver and merge its stream of messages into the application cycle. \"),Object(i.h)(\"p\",\" The various monad constructors demonstrate a way of encapsulating procedures and state in chainable objects. You might incorporate Monad or one of the other constructors presented here in your application, but I think the thing that is most valuable is the general concept. I prefer Cycle.js, but I think the monads might make Node, React and some of the other frameworks more manageable. \"),Object(i.h)(\"h3\",\"Computations\"),Object(i.h)(\"p\",\" Computations are easy to link if each result is returned in an instance of Monad. Here are a few examples of functions that return instances of Monad: \"),Object(i.h)(\"pre\",\"  function ret(v, id = 'temp') {\\n      window[id] = new Monad(v, id);\\n      return window[id];\\n    }\\n    function cube (v, id) {\\n      return ret(v * v * v);\\n    };\\n    function add (x, b) {\\n      return ret(parseInt(x,10) + parseInt(b,10) );\\n    };\\n    function log(x,y) {\\n        console.log(y)\\n        return ret(x);\\n    };  \"),Object(i.h)(\"p\",' The \"$\" prefix provides control over the destination of computation results. In the following example, m1, m2, and m3 have already been declared. Here is a comparison of the results obtained when the \"$\" prefix is used and when it is omitted: '),Object(i.h)(\"pre\",\"    m1.ret(7).bnd(m2.ret).bnd(m3.ret)  // All three monads get the value 7.\\n    m1.ret(0).bnd(add,3,'m2').bnd(cube,'m3')  // 'm1', 'm2', and 'm3' are ignored\"),Object(i.h)(\"pre\",\"    Result: m1.x === 27\\n            m2.x === 7\\n            m3.x === 7  \"),Object(i.h)(\"pre\",\"    m1.ret(0).bnd(add,3,'$m2').bnd(cube,'$m3')   \"),Object(i.h)(\"pre\",\"    Result: m1.x === 0\\n            m2.x === 3\\n            m3.x === 27  \"),Object(i.h)(\"p\",' If the prefix \"$\" is absent, bnd() ignores the string argument. But when the \"$\" prefix is present, m1 retains its initial value, m2 retains the value it gets from from adding m\\'s value (which is 0) to 3, and m3.x is the result of applying \"cube\" to m2.x. Both forms could be useful. '),Object(i.h)(\"p\",\" The following example shows lambda expressions sending variables v1 and v2 through a sequence of computations and v3 sending the final result to the string that is logged. It also shows monads a, b, c, d, e, f, and g being updated and preserved in an array that is not affected by further updates. That is because calling the ret() method does not mutate a monad; it creates a fresh instance with the same name. Here is the example, shown in a screen shot of the Chrome console:. \"),Object(i.h)(\"img.image\",{props:{src:\"demo_000.png\"}}),Object(i.h)(\"h3\",\" The Monad Laws \"),Object(i.h)(\"p\",' In the following discussion, \"x === y\" signifies that the expression x === y returns true. Let J be the collection of all Javascript values, including functions, instances of Monad, etc, and let F be the collection of all functions mapping values in J to instances of Monad with references (names) matching their ids; that is, with window[id] === m.id for some id which is a valid es2015 variable name. The collection of all such instances of Monad along and all of the functions in F is called \"M\". For any instances of Monad m, m1, and m2 in M and any functions f and g in F, the following relationships follow easily from the definition of Monad: '),Object(i.h)(\"div\",\"Left Identity \"),Object(i.h)(\"pre\",\"    m.ret(v, ...args).bnd(f, ...args).x === f(v, ...args).x\\n    ret(v, ...args).bnd(f, ...args).x === f(v, ...args).x\\n    Examples: m.ret(3).bnd(cube).x === cube(3).x  Tested and verified\\n    ret(3).bnd(cube).x === cube(3).x     Tested and verified\\n    Haskell monad law: (return x) >>= f  f x  \"),Object(i.h)(\"div#discussion\",\" Right Identity  \"),Object(i.h)(\"pre\",\"    m.bnd(m.ret) === m      Tested and verified\\n    m.bnd(m.ret) === m   Tested and verified\\n    m.bnd(ret) === m  Tested and verified\\n    Haskell monad law: m >>= return  m \"),Object(i.h)(\"div\",\" Commutivity  \"),Object(i.h)(\"pre\",\"    m.bnd(f1, ...args).bnd(f2, ...args).x === m.bnd(v => f1(v, ...args).bnd(f2, ...args)).x\\n    Example: m.ret(0).bnd(add, 3).bnd(cube).x ===\\n    m.ret(0).bnd(v => add(v,3).bnd(cube)).x  Tested amd verified\\n    Haskell monad law: (m >>= f) >>= g  m >>= ( \\\\x -> (f x >>= g) ) \"),Object(i.h)(\"a\",{props:{href:\"#top\"}},\"Back To The Top\"),Object(i.h)(\"h3\",\" Disussion \"),Object(i.h)(\"span.tao\",\" The Haskell statement \"),Object(i.h)(\"span.turk6\",\"f  g\"),Object(i.h)(\"span\",' means that f x == g x for all Haskell values x of the appropriate type. That is the test applied to Javascript expressions in the \"Monad Laws\" section (above). Neither the == nor the === operator would provide useful information about the behavior of instances of Monad, which are objects. Those operators test objects for location in memory. If the left and right sides of predicates create new instances of m, then the left side m and the right side m wind up in different locations in memory. So we expect m.ret(3) === m.ret(3) to return false, and it does. The question we want answered is the question  answers in Haskell: Can the left and right sides be substituted for one another and still yield the same results.'),Object(i.h)(\"br\"),Object(i.h)(\"br\"),Object(i.h)(\"span.tao\",' The Haskell programming language borrowed the term \"monad\" from the branch of mathematics known as category theory. This was apropriate because Haskell monads, along with the function return and the operator >>=, behave quite a bit like category theory monads, and the inspiration for them came out of category theory. For Haskell monads to actually be category theory monads, they would need to reside in a category-theory category. They don\\'t, although the Haskell mystique tends to give newcommers to the language the impression that they do. See '),Object(i.h)(\"a\",{props:{href:\"http://math.andrej.com/2016/08/06/hask-is-not-a-category/\",target:\"_blank\"}},\"Hask is not a category.\"),Object(i.h)(\"br\"),Object(i.h)(\"p\",\" Research into ways of defining a Haskell category appears to be ongoing. It involves tinkering with special constraints, omitted features, and definitions of morphisms that are not Haskell functions. When a definition of the category is established, Haskell monads are then shown to be, in some contrived context, category-theory monads. Devising such schemes are instructive academic exercises, but I don't think they can provide anything useful to programmers working on applications for industry, commerce, and the Internet. \"),Object(i.h)(\"p\",\" However, imitating definitions and patterns found in category theory, as Haskell does in defining the functor, monoid, and monad type classes, was a stroke of genius that vastly enriched the Haskell programming language and brought it into the mainstream as a viable alternative to java, c++, etc.  This website runs efficiently on a Haskell websockets server. The modified Haskell Wai Websockets server has proven to be extraordinarily easy to maintain as new requirements become necessary. For example, modifying the server to send chat messages and shared todo lists only to members of the same group was a trivial task. It required just a tiny amount of pattern-matching code. Category theory patterns make the Haskell interface to the Cycle front end robust, versitile, and reliable. Those are the qualities that I strive to emulate with JS-monads.\")]),Object(i.h)(\"pre\",\"\\n\"),Object(i.h)(\"div\",[Object(i.h)(\"h3\",{style:{textAlign:\"center\"}},\" A Few Words About Cycle.js \"),Object(i.h)(\"p\",\" Opinionated frameworks tend to annoy and frustrate me. Cycle, on the other hand, is easy on my mind. I love it.\"),Object(i.h)(\"p\",\" In the early stages of developing this website, I had functions that mutated global variables. Sometimes, I directly mutated values in the DOM with statements like \\\"document.getElementById('id').innerHTML = newValue\\\". Cycle didn't object. Over time, mutating variables and manhandling the DOM gave way to gentler techniques.  \"),Object(i.h)(\"p\",\" Handling events is a breeze. Drivers eliminate the need to name event emitters or observers. Driver output in main() is available to any function or block of code that is interested. The result of any callback is in an event in a stream of events that automatically merge with the other streams that define main's return value, which is a blueprint for the updated user interface. This is breathtakingly elegant. main() is called only once, when the application loads. After that, the application hums like an enchanted perpetual motion machine. \"),Object(i.h)(\"pre\",\"function workerDriver () {\\n  return xs.create({\\n    start: listener => { worker.onmessage = msg => listener.next(msg)},\\n    stop: () => { worker.terminate() }\\n  });\\n};\\nfunction websocketsDriver() {\\n  return xs.create({\\n    start: listener => { socket.onmessage = msg => listener.next(msg)},\\n    stop: () => { socket.close() }\\n  });\\n};   \")]),{quad:Ke,quad2:Xe,monadIt:Ve,primes:He,primes2:Ge,primes3:Ue,primes4:Je,monad:Ye});function tt(e,t){var n=calc(e[0],t,e[1]);if(18===n||20===n)score(n);else{var r=gameMonad.fetch4().slice();r.push(n),gameMonad.run([,,0,[],r,,])}}function nt(e){var t=e;commentMonad.html=[];var n=-1;t.map(e=>{var t=e.split(\"<o>\");2!=t.length&&(t=[\"malfunction\",\"8888\"]),t[1]=t[1].replace(/<<>>/g,\",\");var r=showFunc(t[0],pMname.x);n+=1,commentMonad.html.push(h(\"div#\"+n,[h(\"span\",t[0]+\" commented: \"+t[1].replace(/<<>>/g,\",\")),h(\"br\"),h(\"textarea#commit\",{props:{cols:55,rows:2},style:{display:r}},t[1]),h(\"button#deleteB\",{props:{innerHTML:\"delete\"},style:{display:r,fontSize:14}}),h(\"br\"),h(\"span\",\"***************************************************************\")]))})}socket=new WebSocket(\"ws://schalk.net:3055\"),EventEmitter=o.EventEmitter,console.log(\"************************** h and clone *****************\"),h=i.h,clone=Ze,console.log(clone),console.log(\" END ************************** h and clone ***************** EBD\"),bNode=function(e){var t=styl(e.length);return h(\"div#bNode\",[h(\"button#0.num\",{style:{display:t[0]}},\" \"+e[0]+\" \"),h(\"button#1.num\",{style:{display:t[1]}},\" \"+e[1]+\" \"),h(\"button#2.num\",{style:{display:t[2]}},\" \"+e[2]+\" \"),h(\"button#3.num\",{style:{display:t[3]}},\" \"+e[3]+\" \")])},MonadState.prototype.dec=function(){return this.s[1]-=1,buttonNode=bNode(this.s[0][this.s[1]][4]),socket.send(`CG#$42,${pMgroup.x},${pMname.x},${this.s[0][this.s[1]][0]},${this.s[0][this.s[1]][1]}`),window[this.id]=this,this},MonadState.prototype.inc=function(){return this.s[1]+=1,buttonNode=bNode(this.s[0][this.s[1]][4]),socket.send(`CG#$42,${pMgroup.x},${pMname.x},${this.s[0][this.s[1]][0]},${this.s[0][this.s[1]][1]}`),window[this.id]=this,this},MonadState.prototype.run=function([e=this.s[0][this.s[1]][0],t=this.s[0][this.s[1]][1],n=this.s[0][this.s[1]][2],r=this.s[0][this.s[1]][3].slice(),o=this.s[0][this.s[1]][4].slice(),i=pMname.x,s=pMgroup.x]){pMscore.ret(e),pMgoals.ret(t),pMgroup.ret(s),this.s[1]+=1;var a=this.s.slice();return a[0].splice(this.s[1],0,[e,t,n,r,o,i,s]),this.s=a,buttonNode=bNode(o),window.gameMonad=new MonadState(\"gameMonad\",a)},MonadState3.prototype.init=function(e){this.s[0]=e,this.s[1]=this.s[0].split(\"<@>\"),this.s[1]=this.s[1].filter(e=>\"\"!=e),result444=nt(this.s[1])},MonadState3.prototype.append=function(e){this.s[0]=this.s[0]+e,this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),nt(this.s[1])},MonadState3.prototype.edit=function(e,t){console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),this.s[1].splice(e,1,t),this.s[0]=this.s[1].join(\"<@>\"),this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),console.log(\"this.s[1]\",this.s[1]),console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),nt(this.s[1])},MonadState3.prototype.remove=function(e){console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),console.log(this.s[1]),this.s[1]=this.s[1].filter(e=>\"\"!==e),console.log(this.s[1]),this.s[1].splice(e,1),console.log(this.s[1]),console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),this.s[0]=this.s[1].join(\"<@>\"),nt(this.s[1])},MonadState3.prototype.init=function(e){this.s[0]=e,this.s[1]=this.s[0].split(\"<@>\"),this.s[1]=this.s[1].filter(e=>\"\"!=e),result444=nt(this.s[1])},MonadState3.prototype.append=function(e){this.s[0]=this.s[0]+e,this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),nt(this.s[1])},MonadState3.prototype.edit=function(e,t){console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),this.s[1].splice(e,1,t),this.s[0]=this.s[1].join(\"<@>\"),this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),console.log(\"this.s[1]\",this.s[1]),console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),nt(this.s[1])},MonadState3.prototype.remove=function(e){console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),console.log(this.s[1]),this.s[1]=this.s[1].filter(e=>\"\"!==e),console.log(this.s[1]),this.s[1].splice(e,1),console.log(this.s[1]),console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),this.s[0]=this.s[1].join(\"<@>\"),nt(this.s[1])},it7=()=>mMZ52.bnd(e=>{callOrder=callOrder>24?1:callOrder+1,1===callOrder&&(start77=Date.now()),m42_.push(callOrder+\"  \"),m42_.push(e),m42_.push(h(\"br\")),25===callOrder&&m42_.push(\"Elapsed time: \"+(Date.now()-start77)+\" ms\")}),it7_b=()=>mMZ53.bnd(e=>{m43_.push(e),m43_.push(h(\"br\"))}),f23=()=>{var e=Comp().run;m44_=m45_=time=\"\";for(let t=1;t<16;t+=1)start78=Date.now(),e(145)(e=>e**3)(it4_b)(it6_b),mMZ53.bnd(e=>{m43_.push(e),m43_.push(h(\"br\")),15==t&&(time=Date.now()-start78,m44_=\"Elapsed time: \"+car+\" ms\",m45_=`The largest cached prime number is ${primeState.slice(-1)}`)})},f27=()=>{var e=Comp().run;[...Array(15).keys()].map(()=>{e(145)(e=>e**3)(it4_b)(it6_b)(it7_b)})},socket.onclose=function(e){console.log(\"<><><> ALERT - socket is closing. <><><> \",e)},function e(){console.log(\"00000000000000000000000000000000 Entering login\",socket.readyState);setTimeout(function(){if(1===socket.readyState){console.log(\"readyState is\",socket.readyState);var t=Math.random().toString().substring(5);t.toString().substring(2);playerName=t,playerGroup=\"solo\",pMname.ret(t),pMoldName.ret(t),pMgroup.ret(\"solo\"),gameMonad.run([0,0,0,[],[7,7,7,7],t,\"solo\"]);var n=t+\"<o>password\";socket.send(\"CC#$42\"+n),pMcombo.ret(n),pMclicked.ret([]),socket.send(`GZ#$42,solo,${t}`)}else e()},1e3)}(),sources.DOM=function(e,t){t||(t={}),v(e);var n=t.modules||we;!function(e){if(!Array.isArray(e))throw new Error(\"Optional modules option must be an array for snabbdom modules\")}(n);var r,o,i=new xe,s=N([i.createModule()].concat(n)),a=u.a.create({start:function(e){\"loading\"===document.readyState?document.addEventListener(\"readystatechange\",function(){var t=document.readyState;\"interactive\"!==t&&\"complete\"!==t||(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}}),c=u.a.create({start:function(e){o=new MutationObserver(function(){return e.next(null)})},stop:function(){o.disconnect()}});return function(t,n){void 0===n&&(n=\"DOM\"),function(e){if(!e||\"function\"!=typeof e.addListener||\"function\"!=typeof e.fold)throw new Error(\"The DOM driver function expects as input a Stream of virtual DOM elements\")}(t);var h=u.a.create(),l=a.map(function(){var t=function(e){var t=\"string\"==typeof e?document.querySelector(e):e;if(\"string\"==typeof e&&null===t)throw new Error(\"Cannot render into unknown element `\"+e+\"`\");return t}(e)||document.body;return r=new he(t),t}),p=t.remember();p.addListener({}),c.addListener({});var d=l.map(function(e){return u.a.merge(p.endWhen(h),h).map(function(e){return r.call(e)}).startWith((t=Object(F.toVNode)(e),t.data=t.data||{},t.data.isolate=[],t)).fold(s,Object(F.toVNode)(e)).drop(1).map(Te).startWith(e).map(function(e){return o.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),e}).compose(Re);var t}).flatten(),m=L()(a,c).endWhen(h).compose(z()(d)).map(function(e){return e[1]}).remember();m.addListener({error:Ae});var f=new je(m,i);return new k(m,h,[],i,f,n)}}(\"#main-container\"),sources.WS=function(){return xs.create({start:e=>{socket.onmessage=t=>e.next(t)},stop:()=>{socket.close()}})},sources.GD=gridDriver,Object(We.run)(function(t){console.log(\"0^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ got to main()\");const n=t.WS.map(e=>{var t=e.data.split(\",\"),o=(t[1],t[2]),i=t[3],s=t[4];mMZ9.bnd(()=>{console.log(\"sender is\",o),console.log(\"extra is\",i),console.log(\"The full message is\",e),console.log(\"v is\",t)}),mMZ10.bnd(()=>{o===pMname.x?gameMonad.run([t[7],t[8],0,[],[t[3],t[4],t[5],t[6]]]):gameMonad.run([,,,[],[t[3],t[4],t[5],t[6]]])}),mMZ11.bnd(()=>{console.log(\"The message arrived\",n);var e=t.slice(3,t.length).join(\", \"),r=t[2]+\": \"+e;messages.unshift(h(\"span\",r),h(\"br\")),console.log(\"The message was typeof ar\",typeof r)}),mMZ12.bnd(()=>{mMgoals2.ret(\"The winner is \"+t[2]),setTimeout(function(){mMgoals2.ret(\"\")},700)}),mMZ13.bnd(()=>{mMgoals2.ret(\"A player named \"+t[2]+\" is currently logged in. Page will refresh in 4 seconds.\"),refresh()}),mMZ14.bnd(()=>{var t=e.data.split(\"<$>\")[1];return console.log(\"In mZ14.bnd - - ar is\",t),console.log(\"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzztaskMonad\",taskMonad),taskMonad.init(t)}),mMZ15.bnd(()=>{var e=[],n=t[3].slice(),r=n.split(\"<$!$>\"),o=r.map(t=>{console.log(\"In mMZ15.bnd ar, arr, arr2, and arr3 are\",e,n,r,o),e.push(t),e.push(h(\"br\"))});gameData=e}),mMZ16.bnd(()=>{var e=mMcommentStr.x;\"code1\"===s&&(mMregister.ret(\"The registered name \"+i+\" and the associated password were recognized. \"),socket.send(\"GZ#$42,\"+pMgroup.x+\",\"+pMname.x+\",<@>\"+e)),\"code2\"===s&&(mMregister.ret(\"The new name \"+i+\" was registered.\"),socket.send(\"GZ#$42,\"+pMgroup.x+\",\"+pMname.x+\",<@>\"+e)),\"code3\"===s&&(pMname.ret(o),mMregister.ret(\"The password you entered is not the password that is registered for \"+tempName+\".\"),mMshowRegister.ret(\"inline\"))}),mMZ17.bnd(()=>{var e=i.substring(0,i.length-3);\"\"!==(e=(e=e.replace(/<@><@>/g,\"<@>\")).replace(//g,\"\"))&&commentMonad.init(e)}),mMZ18.bnd(()=>{commentMonad.append(i)}),mMZ19.bnd(()=>{commentMonad.edit(i,s),console.log(\"In mMZ19 to edit a comment. <><><><><><><> extra, extra2:\",i,s)}),mMZ20.bnd(()=>{commentMonad.remove(parseInt(i,10))}),mMZ21.bnd(()=>{console.log(\"ooooooooooooooooooo New task from the server\",i),taskMonad.append(i)}),mMZ22.bnd(()=>{taskMonad.edit(t[3],t[4])}),mMZ23.bnd(()=>{console.log(\"In mMZ23 -- v[3] is\",t[3]),taskMonad.toggle(t[3])}),mMZ24.bnd(()=>{taskMonad.delete(t[3])}),mMZ25.bnd(()=>{console.log(\"QQQQQQ  Bingo! extra is QQQQQQQWWWWWWWWWWQQQQQQQQ in mMZ25.bnd. \",i),taskMonad.html=taskMonad.init(i)}),mMZ27.bnd(()=>{mMZ38.release(t[3])}),mMZ28.bnd(()=>{console.log(\"Message from the server to mMZ28.bnd-- v[3] is\",t[3]),playerName===o?(mMZ40.release(t[3]),mMZ57.release(t[3])):console.log(\"message from sender to BC#$42\")}),mMZ29.bnd(()=>{console.log(\"Message from the server to mMZ29.bnd-- v[3] is\",t[3]),playerName===o&&(mMZ41.release(t[3]),mMZ58.release(t[3]))}),mMZ30.bnd(()=>{console.log(\"Message from the server to mMZ30.bnd-- v[3] is\",t[3]),playerName===t[2]&&mMZ42.release(t[3])}),ret(t[0]).bnd(r,\"CC#$42\",mMZ9).bnd(r,\"CA#$42\",mMZ10).bnd(r,\"CD#$42\",mMZ11).bnd(r,\"CE#$42\",mMZ12).bnd(r,\"EE#$42\",mMZ13).bnd(r,\"TD#$42\",mMZ14).bnd(r,\"NN#$42\",mMZ15).bnd(r,\"RR#$42\",mMZ16).bnd(r,\"GZ#$42\",mMZ17).bnd(r,\"GN#$42\",mMZ18).bnd(r,\"GE#$42\",mMZ19).bnd(r,\"GD#$42\",mMZ20).bnd(r,\"TA#$42\",mMZ21).bnd(r,\"TE#$42\",mMZ22).bnd(r,\"TT#$42\",mMZ23).bnd(r,\"TX#$42\",mMZ24).bnd(r,\"TI#$42\",mMZ25).bnd(r,\"BB#$42\",mMZ27).bnd(r,\"BC#$42\",mMZ28).bnd(r,\"BD#$42\",mMZ29).bnd(r,\"BE#$42\",mMZ30)});function r(e,t,n){return e==t&&n.release(),ret(e)}var o=t.DOM.select(\"#makeBind\").events(\"click\").map(()=>bindTest()),i=(h(\"div\",\"ready\"),h(\"div\",\"ready\"),t.DOM.select(\"#comment\").events(\"keydown\").map(e=>{if(13==e.keyCode){e.preventDefault();var t=e.target.value.replace(/,/g,\"<<>>\");t=pMname.x+\"<o>\"+t,socket.send(`GN#$42,${pMgroup.x},${pMname.x},<@>${t}<@>`)}})),s=t.DOM.select(\"#deleteB\").events(\"click\").map(function(e){var t=parseInt(e.target.parentElement.id,10),n=commentMonad.s[1].slice(t,t+1)[0];socket.send(`GD#$42,${pMgroup.x},${pMname.x},${t},${n}`)}),a=t.DOM.select(\"textarea#commit\").events(\"keydown\").map(function(e){if(13==e.keyCode){var t=parseInt(e.target.parentElement.id,10),n=e.target.value.split(\",\"),r=pMname.x+\"<o>\"+n.join(\"<<>>\"),o=commentMonad.s[1].slice(t,t+1)[0];socket.send(`GE#$42,${pMgroup.x},${pMname.x},${t},${o},${r}`)}}),u=t.DOM.select(\"input.register\").events(\"keypress\").map(e=>{mMerror.ret(\"\");var t=e.target.value,n=(t.match(/,/g)||[]).length;nameMess=0===n?\"Please enter a name, a comma, and a password\":n>1?\"Commas are not allowed in names or passwords\":\"\";var r=t.split(\",\");if(13===e.keyCode){if(mMerror.ret(\"\"),2!=r.length)return void mMerror.ret(\" There should be one and only one comma\");var o=r[0];pMname.ret(r[0]),tempName=o;var i=r.join(\"<o>\");mMshowRegister.ret(\"none\"),playerName=o,console.log(\"pMname.x is\",pMname.x),console.log(pMname.x===playerName),socket.send(`RR#$42,${pMgroup.x},${pMoldName.x},${i}`),setTimeout(function(){socket.send(`CG#$42,${pMgroup.x},${o},${pMscore.x},${pMgoals.x}`)},700)}}),l=t.DOM.select(\"input#group\").events(\"keypress\").map(e=>{if(13===e.keyCode&&e.target.value){var t=e.target.value.replace(/,/g,\"\");pMgroup.ret(t),send(\"CO#$42\",t),gameMonad.run([0,0,0,[],[0,0,0,0],,t]),socket.send(`TI#$42,${t},${pMname.x}`)}}),p=t.DOM.select(\"input.inputMessage\").events(\"keydown\").map(function(e){13===e.keyCode&&(socket.send(`CD#$42,${pMgroup.x},${pMname.x},${e.target.value}`),e.target.value=\"\")}),m=t.DOM.select(\"#m80\").events(\"change\").map(()=>{});function f(e){var t=Math.sqrt(e[0]*e[5]+e[1]*e[4]),n=Math.sqrt(e[2]*e[7]+e[3]*e[6]),r=Math.sqrt(e[8]*e[13]+e[9]*e[12]),o=Math.sqrt(e[10]*e[15]+e[14]*e[11]);return Math.sqrt(t*o+n*r)}var v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],g=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]];function y(e){var t=e;return[h(\"button#mR0.mR\",t[0]),h(\"button#mR1.mR\",t[1]),h(\"button#mR2.mR\",t[2]),h(\"button#mR3.mR\",t[3]),h(\"button#mR4.mR\",t[4]),h(\"button#mR5.mR\",t[5]),h(\"button#mR6.mR\",t[6]),h(\"button#mR7.mR\",t[7]),h(\"button#mR8.mR\",t[8]),h(\"button#mR9.mR\",t[9]),h(\"button#mR10.mR\",t[10]),h(\"button#mR11.mR\",t[11]),h(\"button#mR12.mR\",t[12]),h(\"button#mR13.mR\",t[13]),h(\"button#mR14.mR\",t[14]),h(\"button#mR15.mR\",t[15])]}var _=[h(\"button#mR0.mR\",0),h(\"button#mR1.mR\",1),h(\"button#mR2.mR\",2),h(\"button#mR3.mR\",3),h(\"button#mR4.mR\",4),h(\"button#mR5.mR\",5),h(\"button#mR6.mR\",6),h(\"button#mR7.mR\",7),h(\"button#mR8.mR\",8),h(\"button#mR9.mR\",9),h(\"button#mR10.mR\",10),h(\"button#mR11.mR\",11),h(\"button#mR12.mR\",12),h(\"button#mR13.mR\",13),h(\"button#mR14.mR\",14),h(\"button#mR15.mR\",15)];function w(e,t,n=v,r=g,o=_,i=mMindexDS){console.log(\"In rExchange i is\",i);var s=n,a=s[e];s[e]=s[t],s[t]=a,console.log(s);var c=s.slice();return r.splice(i.x,0,c),console.log(r),y(s)}var M=t.DOM.select(\"#mR0\").events(\"click\").map(e=>{console.log(\"e is\",e),rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),x=t.DOM.select(\"button#mR1.mR\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),k=t.DOM.select(\"#mR2.mR\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),S=t.DOM.select(\"button#mR3\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),D=t.DOM.select(\"button#mR4\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),O=t.DOM.select(\"button#mR5\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),j=t.DOM.select(\"button#mR6\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),R=t.DOM.select(\"button#mR7\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),T=t.DOM.select(\"button#mR8\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),A=t.DOM.select(\"button#mR9\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),C=t.DOM.select(\"button#mR10\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),E=t.DOM.select(\"button#mR11\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),I=t.DOM.select(\"button#mR12\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),$=t.DOM.select(\"button#mR13\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),N=t.DOM.select(\"button#mR14\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),B=t.DOM.select(\"button#mR15\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),w(rADS[0],rADS[1]),rADS=[])}),L=t.DOM.select(\"#gridInput\").events(\"change\"),P=t.DOM.select(\"#gridBack\").events(\"click\").map(()=>{mMindexDS.x>0&&(mMindexDS.ret(mMindexDS.x-1),v=g[mMindexDS.x].slice())}),z=t.DOM.select(\"#gridForward\").events(\"click\").map(()=>{mMindexDS.x+1<g.length&&(mMindexDS.ret(mMindexDS.x+1),v=g[mMindexDS.x].slice())}),F=t.DOM.select(\"#roll\").events(\"click\").map(()=>{var e=gameMonad.fetch0()-1,t=gameMonad.fetch1();socket.send(`CA#$42,${pMgroup.x},${pMname.x},6,6,12,20,${e},${t}`)}),q=t.DOM.select(\".num\").events(\"click\").map(e=>{if(gameMonad.fetch3().length<2){var t=gameMonad.fetch3(),n=gameMonad.fetch4();t.push(n.splice(e.target.id,1)[0]),gameMonad.run([,,,t,n,,]),2===t.length&&0!=gameMonad.fetch2()&&tt(t,gameMonad.fetch2())}}).startWith([0,0,0,0]),Q=t.DOM.select(\".op\").events(\"click\").map(e=>{var t=gameMonad.fetch3();2===t.length?tt(t,e.target.innerHTML):gameMonad.run([,,e.target.innerHTML,,,,])}),Z=t.DOM.select(\"#ahead.tao1\").events(\"click\"),W=t.DOM.select(\"#back.tao100\").events(\"click\").map(()=>{gameMonad.s[1]>0&&gameMonad.dec()}),H=Z.map(()=>{gameMonad.s[1]<gameMonad.s[0].length-1&&gameMonad.inc()}),G=t.DOM.select(\"#pr1\").events(\"click\").map(e=>{proxyResult=count.next}),U=t.DOM.select(\"#pr2\").events(\"click\").map(e=>{proxyResult=count.previous}),J=t.DOM.select(\"#pr3\").events(\"click\").map(e=>{proxyResult=count.factorial}),V=t.DOM.select(\"#pr4\").events(\"click\").map(e=>{proxyResult=count.primes}),K=t.DOM.select(\"#pr5\").events(\"click\").map(e=>{proxyResult=count.ints}),X=t.DOM.select(\"#fibNum\").events(\"keypress\").map(e=>{13===e.keyCode&&(F_17=f17(Math.abs(Math.floor(toInt(e.target.value)))),F_18=f17(Math.abs(Math.floor(toInt(e.target.value))),0,1,!0))}),Y=t.DOM.select(\"#itter\").events(\"keypress\").map(e=>{13===e.keyCode&&h(\"div\",styleFunc([\"#FFD700\",,\"16px\",,,]),bind(pInt(e.target.value))(e=>e)(()=>mMZ23.bnd(e=>e*e*e))(()=>3)(e=>mMZ23.release(3)+e)(e=>e*e/ar[1])(terminate).join(\", \"))}),ee=t.DOM.select(\"#double\").events(\"keypress\").map(e=>{var t=\"\";13===e.keyCode&&bind(3)(cubeP)(addP(3))(e=>ar[1].then(t=>t-75+e*ar[0]))(terminate).map(e=>e.then?e.then(e=>t=t+e+\", \"):t=t+e+\", \")}),te=t.DOM.select(\"input#code\").events(\"keydown\").map(function(e){var t;\"\"!==e.target.value&&13===e.keyCode&&(mM21.ret(e.target.value),(t=[0,1,e.target.value])[2]>1?mMfib.ret([t[1],t[0]+t[1],t[2]-1]):mM19.ret(t[0]))}),ne=t.DOM.select(\"input#demo2\").events(\"keydown\").map(function(e){\"\"!==e.target.value&&13===e.keyCode&&(Bind.bind1=[],bind1(e.target.value)(cubeP)(()=>idP(Bind.bind1[0]-Bind.bind1[1]))(e=>addP(Bind.bind1[1])(e)))}),re=2,oe=[2],ie=[2];const se=t.WWB.map(e=>{if(\"color\"===e.data[3])fill1Monad.ret(e.data[0]),fill2Monad.ret(e.data[1]),fill3Monad.ret(e.data[2]),mMprimeBlurb.ret(e.data[5]),mMfibBlurb.ret(e.data[4]),mMprimeFibBlurb.ret(e.data[6]);else if(oe=e.data[1].join(\", \"),ie=e.data[2].join(\", \"),mMelapsed.ret(elapsed(e.data[3])),e.data[0].length>primeState2.length){primeState2=e.data[0],fibState=e.data[1],prFibState=e.data[2];var t=primeState2.slice(-1);re=t.toString()}});var ae=t.DOM.select(\"input#fib92\").events(\"keyup\").map(e=>{var t=e.target.value,n=Math.sqrt(t);if(primeState2.slice(-1)[0]>n){var r=Date.now(),o=fibState.slice(0,fibState.indexOf(fibState.find(e=>e>t)));oe=o.join(\", \");var i=o.filter(e=>-1!==prFibState.indexOf(e));ie=i.join(\", \"),mMelapsed.ret(elapsed(r)),diffRender()}else workerB.postMessage([primeState2,fibState,prFibState,t])}),ce=t.DOM.select(\"#clearprimes\").events(\"click\").map(()=>mMres.ret([mMres.x[0],\"\",mMres.x[2],mMres.x[3]]));m42_RES=[],m43_RES=[];var ue=t.DOM.select(\"button.clear_P\").events(\"click\").map(e=>{m42_RESULT=[],m42_RESULT2=[]}),he=t.DOM.select(\"button.factors_P\").events(\"click\").map(function(e){mMfactors3.ret(\"\"),bind(65)(cubeC)(it4)(it6)(it7)});workerG$=t.WWG.map(e=>{console.log(\"Message from workerG\",e),Me=we(e.data),mMZ38.release(e.data)});var le=t.DOM.select(\"button.clear_R\").events(\"click\").map(()=>{m43_=[]}),pe=t.DOM.select(\"button#factors_R\").events(\"click\").map(e=>{console.log(\"walapoluza!\"),m43_=[],m44_=m45_=\"\",it4_d(1e5),it4_d(1e4),it4_d(1e3),it4_d(1e4),it4_d(1e5),it4_d(1e6),it4_d(1e6),it4_d(1e6),it4_d(1e5),it4_d(1e4),it4_d(1e5),it4_d(1e6),it4_d(1e6),it4_d(1e6),it4_d(1e5),it4_d(1e4),it4_d(1e5),it4_d(1e6),it4_d(1e6),it4_d(1e6),it4_d(1e5),it4_d(1e4),it4_d(1e5),it4_d(1e6),it4_d(1e6),it4_d(1e6),it4_d(1e5),it4_d(1e4),it4_d(1e5)}),de=t.DOM.select(\"button#aplus\").events(\"click\").map(()=>{_count.add_a}),me=t.DOM.select(\"button#aminus\").events(\"click\").map(()=>{_count.subtract_a}),fe=t.DOM.select(\"button#bplus\").events(\"click\").map(()=>{_count.add_b}),ve=t.DOM.select(\"button#bminus\").events(\"click\").map(()=>{_count.subtract_b}),be=t.DOM.select(\"button#resetState\").events(\"click\").map(()=>{_count.resetState}),ge=t.DOM.select(\"#stateA\").events(\"keyup\").map(e=>{_state.a=toFloat(e.target.value),_count.go}),ye=t.DOM.select(\"#stateB\").events(\"keyup\").map(e=>{_state.b=toFloat(e.target.value),_count.go});workerH$=t.WWH.map(e=>{mMZ52.release(e.data[1]),e.data[0][e.data[0].length-1],e.data[0].length>primeState.length&&(primeState=e.data[0])});var _e=t.DOM.select(\"input#factors\").events(\"keypress\").map(function(e){13===e.keyCode&&bind(e.target.value)(it8)});workerM$=t.WWM.map(e=>{mMZ53.release(e.data[1]),mMZ58.release(e.data[1]),e.data[0][e.data[0].length-1],e.data[0].length>primeState.length&&(primeState=e.data[0])}),workerO$=t.WWO.map(e=>{!function(e,t){m43_.push(t),m43_.push(h(\"div\")),diffRender()}(m43_,e.data[1]),mMZ69.release(e.data[0]),e.data[0].length>primeState.length&&(primeState=e.data[0])}),_e=t.DOM.select(\"input#factors\").events(\"keypress\").map(function(e){13===e.keyCode&&bind(e.target.value)(it8)}),mMZ40.bnd(e=>{workerH.postMessage([primeState,e])}),mMZ41.bnd(e=>{workerL.postMessage([primeState,e])}),mMZ42.bnd(e=>{workerO.postMessage([primeState,e])});const we=e=>h(\"div\",[Me,h(\"br\"),h(\"span\",bigBlue,e[3]),h(\"span\",bigGreen,e[0]),h(\"span\",bigBlue,e[4]),h(\"span\",bigRed,e[5])]);var Me=h(\"div\",\"\");h(\"div\",\"\");var xe=e=>mMZ33.bnd(e=>{mMt32=new Monad(e,\"mMt32\"),mMt33.ret(e+\" cubed is \"+e*e*e),xe(e+1)});xe(0);var ke=t.DOM.select(\"#testZ\").events(\"click\").map(function(){mMZ33.release(mMt32.x+1)}),Se=t.DOM.select(\"#testQ\").events(\"click\").map(()=>{mMZ33.release(0),diffRender()}),De=t.DOM.select(\"#testW\").events(\"keypress\").map(function(e){13===e.keyCode&&(mMZ33.release(parseInt(e.target.value,10)),diffRender())}),Oe=e=>t=>n=>h(\"div\",[h(\"pre\",e,\" ping        ---\\x3e \"),h(\"pre\",t,\"                 <---        pong \"),h(\"pre\",\"          -- SCORE: ping: \"+n[0]+\" pong: \"+n[1])]);m67_RESULT=Oe(_A1)(_A3)([3,2]),PingpongMaker=e=>{var t=_A1,n=_A3,r=[0,0],o=0,i=Math.floor(7*Math.random())+1;return function s(){if(!(r[0]>10||r[1]>10)){var a=400;t===_A3?(t=_A1,n=_A3):t===_A1&&(t=_A3,n=_A2),o<=i?(o+=1,window[e]=Oe(t)(n)(r),diffRender()):o%2==0?(a=600,o=0,r[0]+=1,window[e]=Oe(_A1)(_A3)(r),diffRender(),i=Math.floor(7*Math.random())+1):o%2==1&&(a=600,o=0,r[1]+=1,window[e]=Oe(_A3)(_A2)(r),diffRender(),i=Math.floor(7*Math.random())+1),setTimeout(function(){s()},a)}}};var je=e=>t=>t=>t=>n=>{\"serve\"===r&&(r=_A3);var r=e?_A1:_A3,o=e?_A3:_A2;pingDisplay=(e=>t=>n=>h(\"div\",[h(\"pre\",e,\" ping        ---\\x3e \"),h(\"pre\",t,\"                 <---        pong \"),h(\"pre\",\"          -- SCORE: ping: \"+n[0]+\" pong: \"+n[1])]))(r)(o)(t)(d)},Re=[0,0];pp4=()=>{var e,t=_A3,n=_A2,r=_A3,o=0,i=0,s=!0,a=300;return e=()=>{je(s=!s)(t)(n)(r),diffRender(),0===o&&(o=Math.floor(11*Math.random())+1),setTimeout(function(){(Re[0]>=11||Re[1]>=11)&&(diffRender(),i=0,o=0,Re=[0,0]),i>=o&&i%2==0&&(Re[0]+=1,i=0,o=0,diffRender()),i>=o&&i%2==1&&(Re[1]+=1,i=0,o=0,diffRender()),a=i<o?300:900,i+=1,diffRender(),e()},a)}};var Te=t.DOM.select(\"button.pingpong\").events(\"click\").map(()=>{PingpongMaker(\"m67_RESULT\")(),PingpongMaker(\"m68_RESULT\")(),PingpongMaker(\"m69_RESULT\")()});Re=[0,0],pingScore2=[0,0],pingScore3=[0,0];const Ae=e=>t=>n=>r=>\"boolean\"!=typeof e?(window[t]=window[t]===_A3?_A1:_A3,window[n]=window[t]===_A3?_A2:_A3,void diffRender()):e?(window[t]=_A1,window[n]=_A3,window[r][0]+=1,void diffRender()):(window[t]=_A3,window[n]=_A2,window[r][1]+=1,void diffRender()),Ce=t.WWI.map(e=>{\"game over\"!==e.data&&(Ae(e.data)(\"ping43\")(\"ping44\")(\"pingScore\"),Ae(e.data)(\"ping45\")(\"ping46\")(\"pingScore2\"),Ae(e.data)(\"ping47\")(\"ping48\")(\"pingScore3\"),workerI.postMessage(e.data),diffRender())});t.DOM.select(\"button.pingpong4\").events(\"click\").map(()=>{pp4(\"ping43\")(\"ping44\")(\"pingScr1\")}),h(\"button#diffRender\",\"diffRender\"),t.FD.map(e=>{freday=e});var Ee=t.DOM.select(\"div#fredB\").events(\"click\").map(e=>{freday=[],diffRender()}),Ie=t.DOM.select(\"button#fredB\").events(\"click\").map(()=>{freday=[],funcP()}),$e=t.BD.map(e=>console.log(\"Say what?\",e));const Ne=t.WWC.map(e=>{console.log(\"The message arriving from workerC is\",e.data),mMfactors.ret(e.data[1]),e.data[0][e.data[0].length-1],e.data[0].length>primeState.length&&(primeState=e.data[0])});var Be=t.DOM.select(\"input#factors_5\").events(\"keyup\"),Le=Be.map(function(e){if(mMfactors7.ret(\"\"),13===e.keyCode){var t=e.target.value.split(\",\").map(e=>parseInt(e,10));if(t[0]!=t[0]||t[1]!=t[1]||\"number\"!=typeof t[0]||\"number\"!=typeof t[1])return void mMfactors7.ret(\"It works only if you enter two integers separated by a comma.\");workerD.postMessage([primesMonad.s,t,decompMonad.s,\"Happy, happy\"])}});const Fe=t.WWD.map(e=>{mMfactors6.ret(e.data[0][3]),window.primesMonad=new MonadState(\"primesMonad\",e.data[0],primes_state),mMfactors8.ret(e.data[1])});var qe=t.DOM.select(\"input#factors_1\").events(\"keydown\").map(function(e){if(13===e.keyCode){var t=e.target.value,n=Math.sqrt(t);if(primeState.slice(-1)[0]>n)var r=primeState.slice(0,primeState.indexOf(primeState.find(e=>e>t)));else r=primeState;workerE.postMessage([r,t])}});const Qe=t.WWE.map(e=>{mMfactors.ret(e.data[1])});var Ze=t.DOM.select(\"input#factors_5b\").events(\"keyup\"),We=Ze.map(function(e){if(mMfactors7.ret(\"\"),13===e.keyCode){var t=e.target.value.split(\",\").map(e=>parseInt(e,10));if(console.log(\"In fA$ ar is\",t),t[0]!=t[0]||t[1]!=t[1]||\"number\"!=typeof t[0]||\"number\"!=typeof t[1])return void mMfactors7.ret(\"It works only if you enter two integers separated by a comma.\");workerF.postMessage([primesMonad.s,t,decompMonad.s])}});const He=t.WWF.map(e=>{console.log(\"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz -> Back in the main thread. m is\",e),mMfactors6_b.ret(e.data[2][3]),window.primesMonad=new MonadState(\"primesMonad\",e.data[0],primes_state),window.decompMonad=new MonadState(\"decompMonad\",e.data[2],primes_state),mMfactors8_b.ret(e.data[1])});var Ge=t.DOM.select(\"input#factors800\").events(\"keyup\").map(function(e){mMfactors800.ret(\"\");var t=e.target.value.split(\",\").map(e=>parseInt(e,10));if(13===e.keyCode){if(t[0]!=t[0]||t[1]!=t[1]||\"number\"!=typeof t[0]||\"number\"!=typeof t[1])return void mMfactors7.ret(\"It works only if you enter two integers separated by a comma.\");mMfactors800.ret(simpleWay(t[0],t[1]))}});function Ue(e,t,n){var r=new Monad(t(e),n);return window[n]=r,r}document.onload=function(e){console.log(\"onload event: \",e),mMitterfib5.release(200)},function e(){var t=makeBind();mMZ3.bnd(n=>{t=t.b(n),mMquad4.ret(\"\"),mMquad6.ret(\"\"),mMquad5.ret(n+\" * x * x \"),mMZ3.bnd(t=>{mMquad6.ret(t+\" * x \"),mMZ3.bnd(r=>{mMtemp.ret([n,t,r]).bnd(Ue,qS4,\"mMtemp2\").bnd(o=>{let i=o[0],s=o[1];return 0===i?(mMquad5.ret(\"No solution\",mMtemp),mMquad6.ret(\" \"),void e()):0===s?(mMquad5.ret(\"No solution\"),mMquad6.ret(\" \"),void e()):(mMquad4.ret(\"Solutiions for \"+n+\", \"+t+\" and \"+r+\" are \"+i+\" and  \"+s),mMquad5.ret(ze(n).text+\" * \"+i+\" * \"+i+\" + \"+ze(t).text+\" * \"+i+\" + \"+ze(r).text+\" = 0\"),mMquad6.ret(ze(n).text+\" * \"+s+\" * \"+s+\" + \"+ze(t).text+\" * \"+s+\" + \"+ze(r).text+\" = 0\"),void e())})})})})}();var Je,Ve=t.DOM.select(\"#quad\").events(\"keypress\").map(function(e){13===e.keyCode&&(mMZ3.release(e.target.value),document.getElementById(\"quad\").value=null)});Je=e=>t=>n=>e+t+n,Je,foo(4),foo(5),foo(6),foo(7),foo(8),foo(9);var Ke=t.DOM.select(\"#dem3\").events(\"keypress\").map(e=>{13===e.keyCode&&(obR.push(e.target.value),e.target.value=null)}),Xe=t.DOM.select(\"#dem4\").events(\"keypress\").map(e=>{13===e.keyCode&&(fu_4(e.target.value),e.target.value=null)}),Ye=t.DOM.select(\"#dem5\").events(\"keypress\").map(e=>{13===e.keyCode&&(ann27(e.target.value),e.target.value=null)}),nt=t.DOM.select(\"#dem6\").events(\"keypress\").map(e=>{13===e.keyCode&&(push3(_arQuad,e.target.value),e.target.value=null)}),rt=t.DOM.select(\"#dem8\").events(\"keypress\").map(e=>{console.log(\"In dem8\"),13===e.keyCode&&runT(toFloat(e.target.value))}),ot=t.DOM.select(\"#foocow\").events(\"keypress\").map(function(e){13===e.keyCode&&runFoo(toInt(e.target.value))}),it=t.DOM.select(\"#caption\").events(\"click\").map(function(){\"none\"===get(mMcaptionDiv)?mMcaptionDiv.ret(\"block\"):mMcaptionDiv.ret(\"none\")}),st=t.DOM.select(\"#game\").events(\"click\").map(function(){\"none\"===get(mMgameDiv)?mMgameDiv.ret(\"block\"):mMgameDiv.ret(\"none\")}),at=t.DOM.select(\"#clear\").events(\"click\").map(()=>{gameMonad.clearPicked()}),ct=(t.DOM.select(\"input#group\").events(\"keypress\").map(e=>{mM10.ret(e.target.value),pMgroup.ret(e.target.value),worker.postMessage([mM9.x,e.target.value])}),t.DOM.select(\"#primeNumbers\").events(\"keypress\").map(function(e){13===e.keyCode&&worker.postMessage([\"CE#$42\",primesMonad.s,e.target.value])})),ut=t.DOM.select(\".box\").events(\"click\"),ht=ut.map(e=>{console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"In boxAction$ -- e is\",e),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");var t=parseInt(e.target.parentElement.id,10),n=taskMonad.s[1].slice(t,t+1)[0],r=n,o=n.split(\"<$>\");(o=o.filter(e=>\"\"!==e))[1]=\"false\"===o[1]?\"true\":\"false\";var i=o.join(\"<$>\");socket.send(`TT#$42,${pMgroup.x},${pMname.x},${t},${r},${i}`)}),lt=t.DOM.select(\".cbx2\").events(\"click\").map(e=>{console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"In cbxAction$ -- e is\",e),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");var t=parseInt(e.target.parentNode.id,10),n=taskMonad.s[1].slice(t,t+1)[0],r=n,o=n.split(\"<$>\");(o=o.filter(e=>\"\"!==e))[1]=\"false\"===o[1]?\"true\":\"false\";var i=o.join(\"<$>\");socket.send(`TT#$42,${pMgroup.x},${pMname.x},${t},${r},${i}`)}),pt=(ht=ut.map(e=>{console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"In boxAction$ -- e is\",e),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");var t=parseInt(e.target.parentElement.id,10),n=taskMonad.s[1].slice(t,t+1)[0],r=n,o=n.split(\"<$>\");(o=o.filter(e=>\"\"!==e))[1]=\"false\"===o[1]?\"true\":\"false\";var i=o.join(\"<$>\");socket.send(`TT#$42,${pMgroup.x},${pMname.x},${t},${r},${i}`)}),lt=t.DOM.select(\".cbx2\").events(\"click\").map(e=>{console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"In cbxAction$ -- e is\",e),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");var t=parseInt(e.target.parentNode.id,10),n=taskMonad.s[1].slice(t,t+1)[0],r=n,o=n.split(\"<$>\");(o=o.filter(e=>\"\"!==e))[1]=\"false\"===o[1]?\"true\":\"false\";var i=o.join(\"<$>\");socket.send(`TT#$42,${pMgroup.x},${pMname.x},${t},${r},${i}`)}),t.DOM.select(\"#deleteTask\").events(\"click\").map(function(e){var t=parseInt(e.target.parentNode.id,10),n=taskMonad.s[1].slice(t,t+1)[0];socket.send(`TX#$42,${pMgroup.x},${pMname.x},${t},${n}`)})),dt=t.DOM.select(\"#edit2\").events(\"keypress\").map(function(e){if(13===e.keyCode){var t=parseInt(e.target.parentElement.id,10),n=taskMonad.s[1][t],r=n.split(\"<$>\"),o=e.target.value.split(\",\").join(\"<<>>\");r.shift(),r.unshift(o);var i=r.join(\"<$>\");socket.send(`TE#$42,${pMgroup.x},${pMname.x},${t},${n},${i}`)}}),mt=t.DOM.select(\"input.newTask\").events(\"keydown\").map(function(e){if(13===e.keyCode){var t=e.target.value.split(\",\");if(t.length<2)return void mMalert.ret(\"You should enter responsible party then a comma then a task\");var n=t.shift(),r=t.shift(),o=t.join(\"<<>>\")+\"<$>false<$>\"+n+\"<$>\"+r;socket.send(`TA#$42,${pMgroup.x},${pMname.x},${o}<@>`)}});console.log(\"Getting close to calcStream@\");var ft=t.DOM.select(\"#chat2\").events(\"click\").map(()=>showChatDiv=\"none\"===showChatDiv?\"block\":\"none\"),vt=t.DOM.select(\"#todoButton\").events(\"click\").map(()=>showTodoDiv=\"none\"===showTodoDiv?\"block\":\"none\"),bt=t.DOM.select(\"#res8\").events(\"click\"),gt=t.DOM.select(\"#diffRender\").events(\"click\").map(()=>{diffRend<50?diffRend+=1:diffRend=0}),yt=t.DOM.select(\"#diff\").events(\"click\").map(()=>{diffRend<50?diffRend+=1:diffRend=0}),_t=t.DOM.select(\"input#change\").events(\"click\").map(e=>{console.log(\"diffRend changed <C><C>< Click Click Click ><C><C> --\\x3e --\\x3e e is\",e)}),wt=t.DOM.select(\"input#chang\").events(\"onChange\").map(e=>{console.log(\"__cow__ changed <C><C>< Change ><C><C> --\\x3e --\\x3e e.target.value is\",e.target.value)}),Mt=bt.map(()=>{res8_Style=res8_HIDE,setTimeout(()=>{res8_Style=res8_SHOW,diffRender()},4200),RESULT_8=[],bind(1)(addP(2))(cubeC)(addC(3))(multC(2))(multP(3))(addC(30))(multC(.1))(terminate).slice(1,8).map(e=>e.then(e=>{RESULT_8.push(e.x+\" \"),console.log(RESULT_8),diffRender()}))});console.log(\"NOW WE ARE AT calcStream@\");var xt=t.DOM.select(\"input#test5\").events(\"keypress\").map(function(e){13===e.keyCode&&test5(e.target.value)}),kt=t.DOM.select(\"input#test7\").events(\"keypress\").map(function(e){13===e.keyCode&&(runTestResult=runT(toInt(e.target.value)))});vnode9=h(\"button#vnode9\",\"vnode9\"),vnode6=h(\"div#vnode6\",time);var St=t.DOM.select(\"#vnode9\").events(\"click\").map(e=>{time=Date.now()});return diffRender=function(){vnode9.elm.click()},{DOM:xs.merge(St,Xe,Ye,rt,nt,ge,ye,de,me,fe,ve,be,X,G,U,J,V,K,ot,Ke,o,L,z,P,M,x,k,S,D,O,j,R,T,A,C,E,I,$,N,B,Te,xt,kt,wt,_t,ne,$e,ee,Y,Ie,Ee,gt,yt,Mt,m,i,ht,lt,p,Ge,H,W,ct,Le,Be,We,Ze,ce,se,Ne,Fe,Qe,He,Ce,ue,le,workerG$,workerH$,workerM$,workerO$,at,qe,pe,he,_e,ae,te,Ve,dt,a,De,ke,Se,pt,s,mt,ft,st,vt,it,l,F,u,n,q,Q).map(()=>h(\"div.main\",[h(\"div.image_3\",[h(\"img.image_2\",{props:{src:\"logo.svg\"}}),h(\"span\",\" \"),h(\"a\",{props:{href:\"https://cycle.js.org/\",target:\"_blank\"}},\"A Cycle.js application\")]),h(\"div\",{style:{textAlign:\"center\",fontWeight:\"bold\"}},[h(\"br\"),h(\"div\",{style:{fontSize:\"32px\",color:\"rgb(130,170,18\",textAlign:\"center\"}},\"THE ESSENCE OF FUNCTIONAL JAVASCRIPT\")]),h(\"br\"),h(\"div\",styleFunc([\"rgb(180,180,56)\",,\"23px\",\"italic\",,\"center\"]),\"Small, reusable functions\"),h(\"div\",styleFunc([\"rgb(180,180,56)\",,\"23px\",\"italic\",,\"center\"]),\"directed by program-specific functions\"),h(\"br\"),h(\"div.content\",[h(\"span.tao\",\" This is a \"),h(\"a\",{props:{href:\"https://cycle.js.org/\",target:\"_blank\"}},\"Cycle.js\"),h(\"span\",\" application working in conjunction with a \"),h(\"a\",{props:{href:\"https://www.haskell.org/#step3\",target:\"_blank\"}},\"Haskell \"),h(\"a.a2\",{props:{href:\"http://hackage.haskell.org/package/wai-websockets-3.0.1.2/docs/Network-Wai-Handler-WebSockets.html\",target:\"_blank\"}},\"Wai WebSockets\"),h(\"span\",\" server, each on its own \"),h(\"a\",{props:{href:\"https://lists.ubuntu.com/archives/ubuntu-announce/2018-April/000231.html\",target:\"_blank\"}},\"Ubuntu 19.04\"),h(\"a.a2\",{props:{href:\"https://www.digitalocean.com/\",target:\"_blank\"}},\" Digital Ocean\"),h(\"span\",\" droplet. The JavaScript is plain, unrestricted \"),h(\"a\",{props:{href:\"https://tc39.github.io/ecma262/\",target:\"_blank\"}},\"Ecmascript 2018\"),h(\"span\",\", transpiled with \"),h(\"a\",{props:{href:\"https://babeljs.io/\",target:\"_blank\"}},\"Babel\"),h(\"span\",\" and bundled by \"),h(\"a\",{props:{href:\"https://webpack.js.org/concepts/\",target:\"_blank\"}},\"Webpack\"),h(\"span\",\".\"),h(\"br\"),h(\"br\"),h(\"span.tao\",\" According to \"),h(\"a\",{props:{href:\"https://www.geeksforgeeks.org/functional-programming-paradigm/\",target:\"_blank\"}},\"Geeks for Geeks\"),h(\"span\",' \"Functional programming is a programming paradigm in which we try to bind everything in pure mathematical functions style.\". The article is a good read for coders who are curious about the \"functional programming\" buzz that is humming on the Internet. It discusses pure functions, recursion, referential transparency first-class functions, higher-order functions, and the oxymoronic phrase: \"immutable variables\", with some example code written in JavaScript. '),h(\"br\"),h(\"br\"),h(\"span.tao\",{style:{color:\"#FF00DD\"}},\" WARNING:\"),h(\"span\",styleFunc([\"#ABFFBA\",,,\"italic\",,,,]),\" Trying to scrupulously conform to the functional paradigm can stifle your creativity and slow your progress toward mastering JavaScript. \"),h(\"p\",\"In this presentation, I try to avoid mutating anything outside of function scope. Information comes from and goes to browsers, web workers, and a remote WebSockets server. Caches of prime numbers and positions on a grid are maintained for efficiency and backtracking. User names, passwords, and comments are maintained by the Haskell server.  \"),h(\"p\",' From my perspective, libraries are largely black boxes with limited usefulness. If you take the time to study and understand the function \"Comp()\" (below) you might feel that you have acquired a potentially useful tool. I hope you will tweak it, add and remove features, and be emboldened to fashion specialized tools that target your specific projects rather than rely on libraries.  '),h(\"p\",\" My code isn't important. The interesting things lie beneath the surface. They are the closures, recursive functions, partially applied function, ... the essence of functional Javascript. Here's Comp(): \"),h(\"pre\",'function Comp ( AR = [] )  {\\n  var f_, p, run;\\n  var ar = AR.slice();\\n  var x = ar.pop();\\n  return run = (function run (x) {\\n    if (x === null || x === NaN || x === undefined) x = f_(\\'stop\\').pop();\\n    if (x instanceof Filt) {\\n      var z = ar.pop();\\n      if (x.filt(z)) x = z; else ar = [];\\n    }\\n    else if (x instanceof Promise) x.then(y =>\\n      {if (y != undefined && y !== false && y === y &&\\n      y.name !== \"f_\" && y.name !== \"stop\" ) {\\n      ar.push(y);\\n      diffRender();\\n    }})\\n    else if (x != undefined && x !== false && x === x &&\\n      x.name !== \"f_\" && x.name !== \"stop\" ) {\\n      ar.push(x);\\n      diffRender();\\n    };\\n    function f_ (func) {\\n      if (func === \\'stop\\') return ar;\\n      else if (typeof func !== \"function\") p = func;\\n      else if (x instanceof Promise) p = x.then(v => func(v));\\n      else p = func(x);\\n      return run(p);\\n    };\\n    return f_;\\n  })(x)\\n}\\n\\nfunction fork (g,f) {return g(f(\\'stop\\').slice(-1)[0] )} '),h(\"p\",' Let \"val1, val2, ...\" be any JavaScript values. Then foo = Comp(val1)(val2) ... (valN) has the following properties:  '),h(\"div\",{style:{color:\"#ddddaa\"}},[h(\"p\",\"There are no default type restrictions on val1, val2, ... valN (\\\"the vals\\\"). If a value v is a function, there are no default restrictions on the type of v's argument or the type of v's return value. Enforcing type constraints is optional. \"),h(\"p\",\" entries that are functions operate on previously returned values (or the resolution values of returned Promises) from left to right,\"),h(\"p\",\"functions have access to all preceding vals or, for vals that are functions, their return values or the resolution values of their returned Promises. The expression \\\"foo('stop')\\\" returns the the array \\\"ar\\\" that is held in the closure that returned foo (above), so foo('stop')[M] for some M < K in the expression \\\"foo = (val1(val2)...(valK = foo('stop')[M]),...(valN)\\\" is a reference ar[M] in the closure. \"),h(\"p\",\"foo (above) resumes where it left off whenever it receives an additional argument. foo can handle a perpetual stream of data. \"),h(\"p\",\"foo forks independent (orthoganal, having their own addresses in memory) branches with expressions such as \\\"var goo = Comp(foo('stop'))\\\".  \"),h(\"p\",'sequences of functions can be run anonymously. For example, these expressions: \"Comp()(4)(x=>x**4)(x=>x/2**4)(\\'stop\\')\" and \"Comp([4])(x=>x**4)(x=>x/2**4)(\\'stop\\')\" both return \"[4, 256, 16]\". '),h(\"p\",\"The expression \\\"foo('stop').pop())\\\" can act as a transducer on any enumerable collection C. C is traversed ONLY ONCE while an arbitrary number of transformations are performed on it. For example, \\\"[a1,a2,...,aJ].map(x => Comp(x)(val1)(val2)...(valN) ('stop').pop())\\\" would return the result of multiple transformations on [a1,a2,...,aJ].\"),h(\"pre\",\" function Filt (p) {\\n          this.p = p;\\n          this.filt = function filt (x) {\\n              return p(x)\\n          }\\n      }; \"),h(\"div\",' \"var b = new Filt(p)\" is the functional equivalent of Array.prototype.filter(p) in'),h(\"pre\",\" Comp(v1)(v2)...(b)(vk1)(vk2)...(vN). \")])]),h(\"div#vn9\",[vnode9,h(\"br\"),h(\"br\"),h(\"div\",time)]),h(\"div.content2\",[h(\"h3\",styleFunc([\"#8ffc95\",,\"23px\",,,\"center\"]),\" Demonstration 1 - Branching Sequence Acrobatics\"),h(\"div\",{style:{display:\"flex\"}},[h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"p\",\"  \"),h(\"p\",' Entering a number \"n\" in one of the boxes on the right causes runT(n) to execute. Here are the definitions of fork(), hold(), and runT(): '),h(\"pre\",{style:{color:\"#eebcbb\"}},\"\\n\\nvar fork = f => string => {\\n    return window[string] = Comp(f('stop'));\\n}\\nvar iD = t => async b => {\\n  await wait(t*1000)\\n  return b;\\n}\\n\\nvar powP = a => b => async c => {\\n  await wait(b*1000)\\n  return c**a;\\n} \"),h(\"br\"),h(\"p\",{style:{color:\"#aaccee\"}},'var orbit_1 = \"In about eight seconds, orb5 will do something shocking. It will remove the last element from orb2.ar and replace it with its square root. Oh well, it\\'s all inside of runT().\" '),h(\"p\",{style:{color:\"#aaccee\"}},' var orbit_2 = \"Soon, orb6 will obtain copies of the last three elements of orb2 and perform some computations. Then it will display \"THE END\". '),h(\"pre\",{style:{color:\"#aaccee\"}},\"orb1 = Comp([k])(cubeP)(() =>\\n    fork(orb2,orb1)()(x=>x+k)(squareP)(multP(1/100))(addP(1))(powP(4)(1))(() =>\\n        fork(orb3,orb1)(x=>x+k)(x=>x/10)(x=>x+1)(cubeP)(() =>\\n            orb4(orbit_1)(() => iD(7)(false))(() =>\\n                orb5(orb2('stop').pop())(powP(1/2)(3))(x =>\\n                    orb2(x))(() =>\\n                        orb6(orbit_2)(iD(7)(false))(() =>\\n                            orb7(orb2('stop').slice(-3,-2)[0])\\n                            (iD(1)(orb2('stop').slice(-2,-1)[0]))\\n                            (iD(1)(orb2('stop').slice(-1)[0]))(powP(1/2)(1))\\n                            (addP(1))(powP(3)(1))(iD(4)(\\\"THE END\\\"))\\n                        )\\n                    )\\n                )\\n            )\\n        )\\n    )\\n}; \")]),h(\"div\",{style:{marginRight:\"2%\",width:\"45%\"}},[h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"input#dem8\",{style:{height:\"15px\",color:\"blue\",fontSize:\"18px\"}}),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"div\",\"orb1.ar is [\"+orb1(\"stop\").join(\", \")+\"]\"),h(\"div\",\"orb2.ar is [\"+orb2(\"stop\").join(\", \")+\"]\"),h(\"div\",\"orb3.ar is [\"+orb3(\"stop\").join(\", \")+\"]\"),h(\"br\"),h(\"div\",orb4(\"stop\").join(\", \")),h(\"br\"),h(\"div\",\"orb5.ar is [\"+orb5(\"stop\").join(\", \")+\"]\"),h(\"br\"),h(\"div\",orb6(\"stop\").join(\", \")),h(\"br\"),h(\"div\",\"orb7.ar is [\"+orb7(\"stop\").join(\", \")+\"  ]\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\")])]),h(\"h3\",styleFunc([\"#8ffc95\",,\"23px\",,,\"center\"]),\"Demonstration 2 - Compose() Stress Test \"),h(\"div\",{style:{display:\"flex\"}},[h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"br\"),h(\"pre\",\"var f = Comp();\\nf(3)(x=>x**3)(x=>x+3)(x=>x*x);\\nconsole.log(f('stop'))\\n// [3, 27, 30, 900]\\n\\nvar h = Comp();\\nfork(h,f)(x=>x/100)(x=>x*x)('stop');\\nconsole.log(h('stop'));\\n// [900, 9, 81]\\n\\nh()(x=>x/27)(x=>x**4)(x=>x+1000)\\nconsole.log(h('stop'));\\n// [900, 9, 81, 3, 81, 1081]\\n\\nh(h('stop')[2])(x=>x/27)(x=>x**4)(x=>x+5000)\\nconsole.log(h('stop'));\\n// [900, 9, 81, 3, 81, 1081, 81, 3, 81, 5081]\\n\\nvar g = Comp();\\nfork(g,h)(x=>x-5000)(x=>x**(1/4))(x=>x*9)\\nconsole.log(g('stop'))\\n// [5081, 81, 3, 27]  \")]),h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"br\")])]),h(\"h3\",styleFunc([\"#8ffc95\",,\"23px\",,,\"center\"]),\"Demonstration 2 - Compose() Stress Test \"),h(\"div\",{style:{display:\"flex\"}},[h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"br\"),h(\"p\",' To see the demonstration, Click \"GO\" or enter a number and then re-enter it several times. idP() and squareP() are the identity and square functions delayed in ES6 Promises. '),h(\"pre\",\"\\n\\nfunction test4 (w) {\\n    var f = Comp([w]);\\n    return f(cubeP)\\n    (x=>idP(x+f('stop')[0]))(squareP)\\n    (() => idP(f('stop')[2]**3))\\n    (x=>idP(x/f('stop')[3]))\\n    (x=>idP(x-f('stop')[1]))('stop')\\n}; \"),h(\"p\",' In test4 (above), \"f (\\'stop\\')\" refers to the current state of the array held in the Comp() closure that returned \"f\" '),h(\"pre\",\"function test5 (n) {\\n    var x = toInt(n);\\n    _C0 = test4(x+0);\\n    _C1 = test4(x+1);\\n    _C2 = test4(x+2);\\n    _C3 = test4(x+3);\\n    _C4 = test4(x+4);\\n    _C5 = test4(x+5);\\n    _C6 = test4(x+6);\\n    _C7 = test4(x+7);\\n    _C8 = test4(x+8;\\n} \")]),h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"br\"),h(\"div\",`${_C0.join(\", \")}`),h(\"div\",`${_C1.join(\", \")}`),h(\"div\",`${_C2.join(\", \")}`),h(\"div\",`${_C3.join(\", \")}`),h(\"div\",`${_C4.join(\", \")}`),h(\"div\",`${_C5.join(\", \")}`),h(\"div\",`${_C6.join(\", \")}`),h(\"div\",`${_C7.join(\", \")}`),h(\"div\",`${_C8.join(\", \")}`),h(\"br\"),h(\"span\",\" value of n --\\x3e \"),h(\"input#test5\",{style:{height:\"15px\",color:\"blue\",fontSize:\"18px\"}}),h(\"br\"),h(\"br\"),h(\"button#makeBind\",{style:{fontSize:\"17px\",marginLeft:\"7%\"}},\"GO\"),h(\"br\"),h(\"br\"),h(\"p\",\" In test4, Comp() returns arrays located in separate addresses in memory, so it's no surprise that nearly simultaneous calls to tes4 don't clash with one another, or that restarted incomplete sequences don't trip over themselves. \"),h(\"p\",\" The variables prefixed by \\\"_C\\\" are permanent fixtures of the virtual DOM. The side effect of repeatedly changing their values while test4 executes can't cause any mischief because the mutations occur in the virtual DOM. The mutations do nothing but trigger Snabdom's diff and render routine. Functional programming and Cycle.js are a good match, especially when (as is the case here) there are no callback functions in the virtual DOM.  \"),h(\"br\")])]),h(\"h1\",\"METAPROGRAMMING WITHOUT PROXIES \"),h(\"h3\",styleFunc([\"#8ffc95\",,\"23px\",,,\"center\"]),\"Demonstration 3 \"),h(\"div\",{style:{display:\"flex\"}},[h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"p\",' It is easy to add functionality to the array method \"push\" without altering Array.prototype.push or using a proxy. The quadratic formula runs on accumulated numbers every third time obR.push() is called. Here\\'s the code:  '),h(\"pre\",\"var obR  = { ar: [] };\\n\\nobR.push = function (x) {\\n  var temp;\\n  this.ar.push(x);\\n  if (this.ar.length > 2) {\\n    quadF(a[0])(a[1])(a[2]);\\n    this.ar = [];\\n  }\\n};  \"),h(\"p\",' obR.push(n) executes when a user enters a number \"n\". '),h(\"pre\",`  var quadF = a => b => c => {\\n      let ar = [];\\n      let d = (-b - Math.sqrt(b * b - 4 * a * c)) / (2 * a);\\n      let e = (-b + Math.sqrt(b * b - 4 * a * c)) / (2 * a);\\n      if (d !== NaN) {\\n          ar.push(\\`${Pe}*x*x + ${b}*x + ${c} = 0 has the following solutions:\\`);\\n          ar.push(\\`x = ${d} and x = ${e}\\`);\\n      }\\n      else {\\n          ar.push(\\`${Pe}*x*x + ${b}*x + ${c} = 0 has no solution\\`);\\n          ar.push('');\\n      }\\n      return ar;\\n  } `)]),h(\"div\",{style:{marginLeft:\"3%\",marginRight:\"2%\",width:\"50%\"}},[h(\"p\",' Enter three coefficients for a quadratic equation, ONE NUMBER AT A TIME. obR() executes on each number you enter. The third entry will trigger execution of quadMaker on your selections. To see some solutions, enter \"1\" then \"3\" then \"2\" or \"1\" then \"2\" then \"-3\". '),h(\"input#dem3\",{style:{height:\"15px\",color:\"blue\",fontSize:\"18px\"}}),h(\"br\"),h(\"br\"),h(\"div\",{style:{color:\"#ffabab\"}},[h(\"br\"),_oB_[0],h(\"br\"),_oB_[1],h(\"br\"),h(\"br\")])])]),h(\"h3\",styleFunc([\"#8ffc95\",,\"23px\",,,\"center\"]),\" Demonstration 4 \"),h(\"div\",{style:{display:\"flex\"}},[h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"p\",\" Of course, a proxy works too, only less efficiently and less transparently with more lines of code.    \"),h(\"pre\",'var  _arQuad = [];\\n\\nfunction push3 (ar, x) {ar.push(x);  return ar };\\n\\npush3 = new Proxy(push3, {\\n    apply: function(a, b, c) {\\n        if (c[0].length === 3)\\n        if (c[0].length === 2) {\\n          console.log(\\'c is\\',c);\\n           quadMaker(\"g\", \"h\")(c[0][0])(c[0][1])(c[1]);\\n            _arQuad = [];\\n        }\\n    return Reflect.apply(a,b,c);\\n    }\\n}); ')]),h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"p\",\" Enter three coefficients for a quadratic equation, ONE NUMBER AT A TIME. Your entries will be routed to push3(). \"),h(\"input#dem6\",{style:{height:\"15px\",color:\"blue\",fontSize:\"18px\"}}),h(\"br\"),h(\"br\"),h(\"div\",{style:{color:\"#ffabab\"}},[h(\"br\"),_oB_[0],h(\"br\"),_oB_[1],h(\"br\"),h(\"br\")]),h(\"br\"),h(\"br\"),h(\"span\",\" More proxy demonstrations are at \"),h(\"a\",{props:{href:\"#proxies\"}},\"Fun With Proxies\"),h(\"span\",\". \")])])]),h(\"h3\",styleFunc([\"#8ffc95\",,\"23px\",,,\"center\"]),\" Demonstration 5\"),h(\"div.content2\",[h(\"div\",{style:{display:\"flex\"}},[h(\"div\",{style:{marginRight:\"2%\",width:\"50%\"}},[h(\"p\",' Here is another approach to function composition, featuring rapid-fire redefinition of a parameter \"v\" by functions in an array (\"ar\"). \"v\" and \"ar\" are available to every function in \"ar\". In the example, we see \"v => ar[3](v)\" and \"y => y - x\" where y is the previously computed value and x is the starting value. A more elaborate version could be made to handle asynchronous code. \"f_86\", \"foo\", and runFoo are shown below. '),h(\"p\",' Enter a number \"n\" on the right to call \"runFoo(n)\". '),h(\"pre\",\"    var f_86 = v => t => {\\n        var ar = [v];\\n        t.map(g => ar.push(v=g(v)));\\n         return ar\\n    }; \"),h(\"pre\",{style:{color:\"#8ffc95\"}},\"    var foo = x => f_86(x)([v=>v**3, v=>v+x,\\n      v=>v**2,v=>ar[3](v),v=>v**(1/4),\\n      v=>v-x,v=>Math.round(v**(1/3))]); \"),h(\"pre\",\"    function runFoo (n) {\\n        foocow_0 = foo(n+0));\\n        foocow_1 = foo(n+1));\\n        foocow_2 = foo(n+2));\\n        foocow_3 = foo(n+3));\\n        foocow_4 = foo(n+4));\\n        foocow_5 = foo(n+5));\\n        foocow_6 = foo(n+6));\\n        foocow_7 = foo(n+7));\\n        foocow_8 = foo(n+8));\\n    } \")]),h(\"div\",[h(\"br\"),h(\"div\",'Enter a number \"n\" below to see the result of \"runFoo\" executing on nine numbers'),h(\"br\"),h(\"input#foocow\"),h(\"br\"),h(\"br\"),h(\"div\",`${foocow_0.join(\", \")}`),h(\"div\",`${foocow_1.join(\", \")}`),h(\"div\",`${foocow_2.join(\", \")}`),h(\"div\",`${foocow_3.join(\", \")}`),h(\"div\",`${foocow_4.join(\", \")}`),h(\"div\",`${foocow_5.join(\", \")}`),h(\"div\",`${foocow_6.join(\", \")}`),h(\"div\",`${foocow_7.join(\", \")}`)])])]),h(\"div\",styleFunc([\"#361B01\",,,,\"90%\",\"center\"]),\"**************************************************************************************************************\"),h(\"div.content\",[h(\"span.tao\",\" This website demonstrates the awesome potential of unconstrained JavaScript. Programming with enforced types, enforced purity of functions, enforced immutability, and the routing of all side effects to the virtual DOM seems akin to joining a Catholic religeous order and taking a vow of poverty, chastity, and obedience. So it might surprise you to know that I am enthusiastic about functional programming and greatly enjoy working on the Haskell WebSocket server associated with this site. The \"),h(\"a\",{props:{href:\"https://github.com/fantasyland/fantasy-land\",target:\"_blank\"}},\"Fantasyland\"),h(\"span\",\" algebraic javascript specification is an admirable achievement. People who are familiar with Haskell can jump right in and start coding with familiar monads and functors borrowed from the Haskell \"),h(\"a\",{props:{href:\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html\",target:\"_blank\"}},\"Prelude module\"),h(\"span\",\". The \"),h(\"a\",{props:{href:\"https://github.com/origamitower/folktale\",target:\"_blank\"}},\"Folktale\"),h(\"span\",\" library also succeeds in implementing an API similar to the Haskell Prelude module. But when my goal is providing a robust, pleasing user interface for the Web, I like having all the power and possibilities of unrestricted Ecmascript 2018 at my disposal. I use \"),h(\"a\",{props:{href:\"https://www.typescriptlang.org/\",target:\"_blank\"}},\"Typescript\"),h(\"span\",\" because it lets me program in JavaScript and assign types to some functions but not others.\"),h(\"br\"),h(\"br\"),h(\"span.tao\",\" If I had to compose functions using library functions, perhaps in some team project, I would choose \"),h(\"a\",{props:{href:\"https://ramdajs.com/docs/#pipe\"}},\"Ramda pipe\"),h(\"span\",\" and \"),h(\"a\",{props:{href:\"https://ramdajs.com/docs/#compose\"}},\"Ramda compose\"),h(\"span\",\". I feel more solidly in control using Comp() and variations with different names. The variations might have fewer features, more features, or Comp() with a minor tweak. It took time to get to this point, but it was time well spent. \"),h(\"br\"),h(\"br\"),h(\"span.tao\",\"This project was created by and is actively maintained by David Schalk. The code repository is at \"),h(\"a\",{props:{href:\"https://github.com/dschalk/functional-javascript\",target:\"_blank\"}},\"functional-javascript\"),h(\"span\",\". The Comments section hasn't function ever since I removed the section with a game, shared todo list, and text messaging section. Users could create or sign into an existing group and choose usernames and passwords. I functioned flawlessly, but I want to consider refactoring it using Comp() rather than Monad instances. \"),h(\"span\",\" section near the end of this page. You can email me at fpschalk@gmail.com. \")]),h(\"h1\",\"___________________________________________________________\"),h(\"div.content\",[h(\"div#bind\"),h(\"br\"),h(\"h3\",\"MonadItter\"),h(\"pre\",\"var MonadItter = function MonadItter() {\\n    this.p = function () {};\\n    this.release = function () {\\n        return this.p.apply(this, arguments);\\n    };\\n    this.bnd = function (func) {\\n        return this.p = func;\\n};\\n}; \"),h(\"p\",' MonadItter instances provide a simple, reliable way of responding to events. In this application, incoming WebSockets messages have unique six-character prefixes. When a comma separated message \"e\" arrives from the server, \"v = e.data.split(\\',\\')\" splits the payload into an array named \"v\". v[0] determines which MonadItter instance is released. For example, when a message with v[0] === \\'BE#$42\\' arrives, mMZ30.release is called on: '),h(\"pre\",\"mMZ30.bnd(() => {\\n    if (playerName === v[2]) {\\n        mMZ42.release(v[3]);\\n    }\\n}); \"),h(\"p\",\" v[2] is the playerName of the user who initiated the interaction with the server. If the person who initiated the interaction receives the message, \\\"mMZ42.release(v[3])\\\" is called, sending the pseudo-random number received from the server to a web worker that sends back the number's prime decomposition. Here's the result: \"),h(\"p\",\" Sometimes, refreshing the browser speeds up this demonstration. Click below to send the server twenty-nine requests for pseudo-random numbers. That will initiate a chain reaction culminating in what you see below. \"),h(\"br\"),h(\"br\"),h(\"button#factors_R\",{style:{fontSize:\"20px\"}},\" .   GO   . \"),h(\"span\",\"~~\"),h(\"button.clear_R\",{style:{fontSize:\"20px\",marginLeft:\"0\"}},\"clear results\"),h(\"br\"),h(\"br\"),h(\"div\",m43_),h(\"div.demo_1\",{style:{fontSize:\"15px\"}},m45_),h(\"br\"),h(\"p\",\" MonadItter instances trap incoming WebSocket messages based on their six-digit prefixes and redirect them according to their intended purposes. No error checking is needed. If a prefix is not recognized, the message falls through and is disregarded. This is how incoming WebSocket messages are parsed: \"),h(\"pre\",{style:{color:\"#aaffff\"}},\"        const messages$ = sources.WS.map(e => {\\n        var v = e.data.split(',')\\n        // console.log(\\\"ret(v[0])\\\", ret(v[0]));\\n        var group = v[1]\\n        var sender = v[2];\\n        var extra = v[3];\\n        var extra2 = v[4];\\n\\n        mMZ9.bnd(() => {\\n          console.log(\\\"sender is\\\", sender);\\n          console.log(\\\"extra is\\\", extra);\\n          console.log(\\\"The full message is\\\", e);\\n          console.log(\\\"v is\\\", v);\\n        });\\n\\n        mMZ10.bnd(() => {\\n          if (sender === pMname.x) {\\n            gameMonad.run([v[7], v[8], 0, [],\\n              [v[3], v[4], v[5], v[6]]\\n            ]);\\n          } else gameMonad.run([, , , [],\\n            [v[3], v[4], v[5], v[6]]\\n          ]);\\n        });\\n               . . .\\n\\n        mMZ29.bnd(() => {\\n          if (playerName === sender) mMZ41.release(v[3]);\\n          // else console.log('message from sender to BD#$42')\\n        });\\n\\n        mMZ30.bnd(() => {\\n          if (playerName === sender) mMZ42.release(v[3]);\\n          else console.log('message from sender to BE#$42')\\n        });\\n\\n        ret(v[0])  // \\\"ret(v[0])\\\" puts v[0] in a Monad2 instance\\n          .bnd(next, 'CC#$42', mMZ9)\\n          .bnd(next, 'CA#$42', mMZ10) // Dice roll\\n\\n               . . .\\n\\n          .bnd(next, 'BD#$42', mMZ29) // works in conjunction with it4_b\\n          .bnd(next, 'BE#$42', mMZ30) // works in conjunction with it4_c\\n      });\\n\\n      function next(x, y, instance, z) {\\n        if (x == y) {\\n          instance.release(z);\\n        }\\n        return ret(x);\\n      }; \"),h(\"p\",' I still haven\\'t discussed the function \"ret()\". It is similar to \"pure\" and \"return\" in Haskell in that it encapsulates a value in an instance of \"Monad2()\", an abbreviated version of \"Monad()\". Instances of Monad2 are objects \"m\" with values \"m.x\" and functions \"m.bnd\" that operate on functions \"f\" and return similar object with values m.x\\' = f(x). Here\\'s the definition of Monad2: '),h(\"pre\",\"  function Monad2(z = 0) {\\n      this.x = z;\\n  };\\n\\n  Monad2.prototype.ret = a => new Monad2(a);\\n  Monad2.prototype.bnd = function (func, ...args) {\\n      return func(this.x, ...args)\\n} \"),h(\"p\",' And here\\'s the definition of \"ret()\": '),h(\"pre\",\"  function ret (val = 0) {\\n      return new Monad2(val);\\n  }; \"),h(\"p\",' The names \"Monad\" and Monad2\" were selected during a time when I was toying with the idea of isolating side effects in linked objects. I borrowed some terminology from the Haskell programming language, but similarities between Haskell monads and my JavaScript monads are pretty superficial. Sure, composing my \"monads\" involves a monad A operating on some function \"f\" that returns a \"monad\" B with value f(A.x), but the types of A and B are \"object\" and the constructors are Monad. Haskell monads encapsulate composed transformations of values to values possibly having different types. '),h(\"h3\",\"Reactivity\"),h(\"span.tao\",\" Reactivity can be achieved in many ways, including: plain JavaScript and HTML event listeners, BaconJs, RxJS,  occurs naturally in the Cycle.js framework. Many developers find that Cycle.js has an unusually steep learning curve. It isn't so bad if you start with Andrew Staltz' \"),h(\"a\",{props:{href:\"https://egghead.io/courses/cycle-js-fundamentals\",target:\"_blank\"}},\" Overview of Cycle.js.\"),h(\"span\",\" Its elegance of its core concept is breathtaking. \"),h(\"br\"),h(\"br\"),h(\"a.tao\",{props:{href:\"https://github.com/snabbdom/snabbdom\"}},\" Snabbdom\"),h(\"span\",\", \"),h(\"a\",{props:{href:\"http://x-stream.github.io/\"}},\" xstream,\"),h(\"span\",' and most of the monads and functions presented here are available in browser developer tools consoles and scratch pads. A production site would load these as modules, but this site is for experimentation and fun so many of its functions and variable definitions are included in scripts in the index.html page. \"var\" is used instead of \"const\" in order to facilitate experimentation. '),h(\"br\"),h(\"p\",\" The next interactive demonstration accepts user input and executes the following statement in a web worker: \"),h(\"pre\",\"bind(ar[1])(execF)(fpFunc(ar[0])(x)); \"),h(\"span\",\" The parameters are defined in the \"),h(\"a\",{props:{href:\"#fp\"}},\"appendix\"),h(\"span\",\". \"),h(\"br\"),h(\"pre\",{style:{color:\"red\",fontStyle:\"italic\"}},\"Red Indicates An Ongoing Computation\"),h(\"pre\",\"Fibonacci numbers   Prime Numbers   Prime Fibonacci Numbers \"),h(\"span\",mMfibBlurb.x),h(\"span\",[h(\"svg\",{attrs:{width:50,height:50}},[h(\"circle\",{attrs:{cx:25,cy:25,r:20,stroke:\"purple\",\"stroke-width\":4,fill:fill1Monad.x}})])]),h(\"span\",mMprimeBlurb.x),h(\"span\",[h(\"svg\",{attrs:{width:50,height:50}},[h(\"circle\",{attrs:{cx:25,cy:25,r:20,stroke:\"purple\",\"stroke-width\":4,fill:fill2Monad.x}})])]),h(\"span\",mMprimeFibBlurb.x),h(\"span\",[h(\"svg\",{attrs:{width:50,height:50}},[h(\"circle\",{attrs:{cx:25,cy:25,r:20,stroke:\"purple\",\"stroke-width\":4,fill:fill3Monad.x}})])]),h(\"br\"),h(\"br\"),h(\"p.red\",\"The elapsed time is \"+mMelapsed.x+\" milliseconds.\"),h(\"input#fib92\"),h(\"br\"),h(\"br\"),h(\"span#PF_7.red6\",\"Fibonacci Numbers\"),h(\"br\"),h(\"span#PF_9.turk\",oe),h(\"br\"),h(\"span#PF_8.red6\",\"Prime Fibonacci Numbers\"),h(\"br\"),h(\"span#primeFibs.turk\",ie),h(\"br\"),h(\"span#PF_21.red6\",\"The largest generated prime number.\"),h(\"br\"),h(\"span.turk\",re),h(\"br\"),h(\"h3\",\" Promises are not needed \"),h(\"p\",\" Asynchronous code can be handled without reliance on Ecmascript 2015 promises either explicitly or implicitly (e.g. using async/await). Cycle.js drivers eliminate any need to explicitly use functions from a reactive library, but xstream is an integral component of Cycle.js unless you choose most.js or RxJS. \"),h(\"p\",\" The second demonstration in this series decomposes numbers into its their prime factors. Testing with sequences of 9's, the first substantial lag occurs at 9,999,999 - unless a large array of prime numbers has already been generated in the previous demonstration or elsewhere. Here it is:\"),h(\"input#factors_1\"),h(\"br\"),h(\"br\"),h(\"span\",mMfactors.x),h(\"span.tao3\",mMfactors23.x),h(\"p\",\" primesMonad and the functions primarily involved in its transformation are shown below: \"),et.primes,h(\"p\",\" primesMonad state updates are generated in workerB.js and stored in the main thread. Users set new upper bounds on the size of the largest Fibonacci number in the series to be considered by entering a number in a browser input box. Here is the relevant code: \"),et.primes3,h(\"p\",\" The user's selected number along with the current state of primesMonad (primesMonad.s) gets posted to workerB, which gets functionality beyond its prototype from workerB.js, which orchestrates preparation of the return message that will be posted back to the main thread. workerB.js delegates the job to functions in script2.js by calling: \"),et.primes4,h(\"p\",\" execF prepares the Fibonacci series and sends its state, along with the state of primesMonad that it received from workerB.js, to fpTransformer. execP is called with the current state and the largest Fibonacci number that had been recently produced by execF as arguments. The updated state is an array with four elements, [new upper bound, new series, largest prime produced in the current browser session, largest series]. If the new result is larger than any previous one, the first and second elements of the state array are identical to the third and fourth. Otherwise, they are smaller. As is apparent in the following code, primesMonad is re-created in the main thread using the state array that was posted by workerB. \"),et.primes2,h(\"br\"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"h2\",\"MonadItter\"),h(\"p\",' As shown in the \"Monads\" section (above), the definition of MonadItter is: '),et.monadItter,h(\"p\",\" MonadItter instances don't link to one another. They exist to facilitate the work of instances of Monad, MonadState, etc. Here's how they work: \"),h(\"p\",'For any instance of MonadItter, say \"it\", \"it.bnd(func)\" causes it.p === func. Calling the method \"it.release(...args)\" causes p(...args) to run, possibly with arguments supplied by the caller. '),h(\"p\",\" MonadItter instances control the routing of incoming WebSocket messages. In one of the demonstrations below, they behave much like ES2015 iterators.\"),h(\"h3\",\" A Basic Iterator \"),h(\"p\",\"The following example illustrates the use of release() with an argument. It also shows a lambda expressions being provided as an argument for the method mMZ1.bnd() (thereby becoming the value of mMZ1.p), and then mMZ1.release providing an arguments for the function mMZ1.p. The code is shown beneath the following two buttons. \"),h(\"button#testZ\",\"mMZ33.release(1)\"),h(\"p\",mMt33.x),h(\"span\",\"Refresh button: \"),h(\"button#testQ\",\"mMt33.ret(0) \"),h(\"span.tao\",\" The expression mMt33.x sits permanently in the Motorcycle virtual DOM description. You can call \"),h(\"span.green\",\"mMZ33.release(v)\"),h(\"span\",\" by entering a value for v below: \"),h(\"br\"),h(\"span\",\"Please enter an integer here: \"),h(\"input#testW\"),h(\"p\",' cube() is defined in the Monad section (above). If you click \"mMZ1.release(1)\" several times, the code (above) will run several times, each time with v === 1. The result, mMt3.x, is shown below the button. mMZ1.p (bnd()\\'s argument) remains constant while mMZ1.release(1) is repeatedly called, incrementing the number being cubed each time. '),h(\"p\",\" Here is another example. It demonstrates lambda expressions passing values to a remote location for use in a computation. If you enter three numbers consecutively below, call them a, b, and c, then the quadratic formula will be used to find solutions for a*x**2 + b*x + c = 0. The a, b, and c you select might not have a solution. If a and b are positive numbers, you are likely to see solutions if c is a negative number. For example, 12, 12, and -24 yields the solutions 1 and -2. \"),h(\"p#quad4.red2\",mMquad4.x),h(\"p#quad5.red2\",mMquad5.x),h(\"p#quad6.red2\",mMquad6.x),h(\"p\",\"Run mMZ3.release(v) three times for three numbers. The numbers are a, b, and c in ax*x + b*x + c = 0. Remember to press <ENTER> after each number. \"),h(\"input#quad\"),h(\"p\",' The function \"solve()\" is at the center of the algorithm. See how mMZ3.bind() appears three times. Each time a user enters a number, say \"x\", mMZ3.release(x) executes. After the third number, solve calls itself so the process can start again. I prefer this approach over ES6 generators. Here\\'s solve(): '),et.quad,h(\"p\",\" And here are the supporting functions: \"),et.quad2,h(\"p\",\" fmap (above) facilitated using qS4 in a monadic sequence. qS4 returns an array, not an instance of Monad, but fmap lifts qS4 into the monadic sequence. \"),h(\"p\",' The function solve() is recursive. It invokes itself after release() executes three times. The expression \"solve()\" resets solve to the top, where mMZ3.p becomes a function containing two nested occurrences of mMZ3.bnd. After mMZ3.release() executes, mMZ3.p becomes the function that is the argument to the next occurrence of mMZ3.bnd. That function contains yet another occurrence of mMZ3.bnd. MonadItter is syntactic sugar for nested callbacks. '),h(\"h3\",styleFunc([\"#8ffc95\",,\"23px\",,,\"center\"]),\"Server and Worker \"),h(\"pre\",\"var it4_b = x => {\\n\\n  .send(`BD#$42,${pMgroup.x},${pMname.x},${x}`);\\n}\\n\\nvar mMZ41 = new MonadItter();\\nvar mMZ53 = new MonadItter();\\n\\nvar it6_b = y => {\\n  mMZ41.bnd(y => workerM.postMessage([primeState, y]));\\n}\\n\\nit7_b = () => mMZ53.bnd(string => {\\n    callOrder2 = callOrder2 > 24 ? 1 : callOrder2 + 1;\\n    if (callOrder2 === 1) start78 = Date.now();\\n    m43_.push(callOrder2 + \\\"  \\\");\\n    m43_.push(string)\\n    m43_.push(h('br'));\\n    if (callOrder2 === 25) m43_.push(\\n        'Elapsed time: ' + (Date.now() - start78) + \\\" ms\\\");\\n});  \"),h(\"br\"),h(\"br\"),h(\"h3\",\" Preserve Archives By Avoiding Mutation \"),h(\"p\",' When you assign a variable to an array, for example \"var arr = [1,2,3]\", arr points to a location in memory. Suppose you want to preserve a record of previous values of arr. You can\\'t do it with an array such as b below: '),h(\"pre\",\"    var arr = [1,2,3];\\n    var c = arr;\\n    var b = [arr];\\n    c.push(4);\\n    console.log(arr);   // [1,2,3,4]\\n    console.log(b[0]);  // [1,2,3,4] \"),h(\"p\",' That didn\\'t work because b[0] points to the same place in memory as arr and c. \"arr.push(4)\" mutated the value in arr\\'s location and \"b.push(arr)\" added a copy. \"b[0] == b[1]\" returning true verifies that both elements of b point to the same place in memory because in JavaScript, the \"==\" operator on objects (including arrays) is defined to return true if and only if the objects\\' '),h(\"p\",' Here is what happens when \"arr.slice()\" is pushed into b: '),h(\"pre\",\"  var arr = [1,2,3];\\n    var b = [arr.slice()];\\n    arr.push(4);\\n    b.push(arr.slice());\\n    console.log(b[0]);  // [1,2,3]\\n    console.log(b[1]);  // [1,2,3,4] \"),h(\"p\",' Success! \"arr.slice()\" returned a copy of arr assigned to a new location in memory. It is anonymous, so the only way to access it is through b. b[0], b[1], and arr each have unique locations in memory so mutating one has no effect on the others. '),h(\"p\",' The sixteen-square grid below puts these concepts into practice. If you click two squares, they exchange locations on the grid. If you do this several times, the \"BACK\" and \"FORWARD\" buttons will display the result of each pair of clicks. '),h(\"div#donkey\",y(g[mMindexDS.x])),h(\"br\"),h(\"button#gridBack\",\"back\"),h(\"button#gridForward\",\"forward\"),h(\"p\",\"index: \"+mMindexDS.x),h(\"p\",\"rNumsDS: \"+v.join(\", \")),h(\"p\",\"rMatrixF(rNumsDS: \"+f(v)),h(\"p\",' Reactivity is achieved in these demonstrations through Cycle.js rather than RxJS, Bacon, or something else that could work just as well, though perhaps not quite as elegantly. This section provides a glimpse of how I use (some might say, \"misuse\") Cycle.js. '),h(\"p\",' If you click any two numbers above they will exchange places with one another. The array \"rNumsDS\" keeps track of the positions of numbers on the grid. '),h(\"pre\",\"var rNumsDS = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] \"),h(\"p\",\" Each square on the grid is a button. This is the initial setup: \"),h(\"pre\",\"  var rDataDS = [\\n      h('button#mR0.mR', 0 ),\\n      h('button#mR1.mR', 1 ),\\n      h('button#mR2.mR', 2 ),\\n      h('button#mR3.mR', 3 ),\\n      h('button#mR4.mR', 4 ),\\n      h('button#mR5.mR', 5 ),\\n      h('button#mR6.mR', 6 ),\\n      h('button#mR7.mR', 7 ),\\n      h('button#mR8.mR', 8 ),\\n      h('button#mR9.mR', 9 ),\\n      h('button#mR10.mR', 10 ),\\n      h('button#mR11.mR', 11 ),\\n      h('button#mR12.mR', 12 ),\\n      h('button#mR13.mR', 13 ),\\n      h('button#mR14.mR', 14 ),\\n      h('button#mR15.mR', 15 ) ]\\n\\n      var ArrDS = [\\n        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\\n      ];  \"),h(\"p\",\" The following line of code is a fixture of the virtual DOM. It accounts for the sixteen-square grid shown above: \"),h(\"pre\",\"  h('div#donkey', ArrDS[indexDS] ) \"),h(\"p\",\" If you begin exploring the demonstration by clicking the upper right square, this code in main() responds by placing the number 3 in rADS: \"),h(\"pre\",\"  var m83$ = sources.DOM\\n    .select('button#mR3').events('click')\\n    .map(e => {\\n      rADS.push(toInt(e.target.id.slice(2,4)));\\n      if (rADS.x.length === 2) {\\n       rDataDS = rExchange (rADS[0], rADS[1]);\\n      }\\n    }) \"),h(\"p\",' Then if you click the bottom right square (var m815), rADS expands to contain \"3\" and \"15\". This causes rExchange(3,15) to run and return the updated value of rDataDS. '),h(\"pre\",\"  function rExchange (k,n) {\\n      var a = rNumsDS[k];\\n      rNumsDS[k] = rNumsDS[n];\\n      rNumsDS[n] = a;\\n      rADS = [];\\n      return makeRDS(rNumsDS);\\n    } \"),h(\"p\",\" The last line of rExchange is a call to makeRDS, which is defined as follows: \"),h(\"pre\",\"  function makeRDS (arr) {\\n      var r = arr.slice();\\n      return [\\n        h('button#mR0.mR', r[0] ),\\n        h('button#mR1.mR', r[1] ),\\n        h('button#mR2.mR', r[2] ),\\n        h('button#mR3.mR', r[3] ),\\n        h('button#mR4.mR', r[4] ),\\n        h('button#mR5.mR', r[5] ),\\n        h('button#mR6.mR', r[6] ),\\n        h('button#mR7.mR', r[7] ),\\n        h('button#mR8.mR', r[8] ),\\n        h('button#mR9.mR', r[9] ),\\n        h('button#mR10.mR', r[10] ),\\n        h('button#mR11.mR', r[11] ),\\n        h('button#mR12.mR', r[12] ),\\n        h('button#mR13.mR', r[13] ),\\n        h('button#mR14.mR', r[14] ),\\n        h('button#mR15.mR', r[15] )\\n      ];\\n    } \"),h(\"p\",' button#R9.mR has id \"#R9\" and formatting class \"mR\". When numbers are rearranged, the id\\'s remain in fixed positions. '),h(\"p\",\" The process is responsive because r83 and r815 are merged in the stream that feeds the virtual DOM; i.e., the stream returned by main() and fed back into main() by run(). Cycle.run(main, sources) is the last line of the front-end code. \"),h(\"p#proxies\",\" This code undoubtedly deviates from Cycle.js and functional programming recommended practices. After all, rNumsDS and rDataDS are global variables tracking the state of the grid. Cycle.js favors maintaining state in streams and functional aficionados eschew global variables, period. Me, I just like to make things work as neatly and efficiently as I can. Making a state stream would be a hassle and, since this is not a group effort, nobody is going to hijack my variable names. So, for now, grid state will hang out in global scope. \"),h(\"a\",{props:{href:\"#proxy2\"}},\"Back to the Demonstration 6\"),h(\"h2\",\"FUN WITH PROXIES\"),h(\"p\",' Proxies can be useful for debugging, type checking, error handling, and more. Where they really shine is in reactive programming. Modern Firefox and Chrome browsers have supported them for quite some time and it seems inevitable that we will see more and more of them in production code. In this Cycle.js application, the virtual DOM diff & render procedure is provided by MobX, which is beginning the switch to reliance on ES6 Proxies for reactivity. autoRefresh() uses a proxy in conjunction with MobX to update the DOM each time a function composed with Bind(true) and mBnd(true) executes (see Demonstrations 1 and 2). The following demonstration features an empty object that seems to contain an invisible key named \"attribute\" along with invisible methods for which \"attribute\" is a parameter.'),h(\"pre\",\"   var count = {}\\n\\nconsole.log(count.next);      // 1\\nconsole.log(count.next);      // 2\\nconsole.log(count.next);      // 3\\nconsole.log(count.next);      // 4\\nconsole.log(count.factorial); // 24 \"),h(\"p\",\" What? Isn't count.next supposed to return \\\"ReferenceError: next is not defined\\\"? What's going on here? \"),h(\"div\",{style:{fontSize:\"28px\",color:\"red\",textAlign:\"center\"}},proxyResult),h(\"br\"),h(\"button#pr1\",{style:{fontSize:\"18px\"}},\"count.next\"),h(\"button#pr2\",{style:{fontSize:\"18px\"}},\"count.previous\"),h(\"button#pr3\",{style:{fontSize:\"18px\"}},\"count.factorial\"),h(\"br\"),h(\"br\"),h(\"button#pr4\",{style:{fontSize:\"18px\"}},\"count.primes\"),h(\"button#pr5\",{style:{fontSize:\"18px\"}},\"count.ints\"),h(\"p\",\" The following code shows why count behaves as though it had methods and an attribute: \"),h(\"pre\",'    function addOne () {this.attribute = this.attribute + 1}\\n    function takeOne () {this.attribute = this.attribute - 1}\\n\\n    function primeNums(n) {\\n      var store  = [], i, j, primes = [];\\n      for (i = 2; i <= n; ++i) {\\n        if (!store [i]) {\\n          primes.push(i);\\n          for (j = i << 1; j <= n; j += i) {\\n            store[j] = true;\\n          }\\n        }\\n      }\\n      return primes.join(\\'. \\');\\n    }\\n\\n\\n    function intArray (n) {\\n         return [...Array(n+1).keys()].join(\\', \\');\\n    }\\n\\n    var factorial = n =>\\n        n <= 1 ? n : n * factorial(n - 1);\\n\\n    var _state_ = {attribute: 0}\\n\\n    var handlerGet = {\\n        get: (a, b, c) => {\\n            if (b === \"next\") {addOne.apply(_state_); return _state_.attribute}\\n            else if (b === \"previous\") {takeOne.apply(_state_); return _state_.attribute}\\n            else if (b === \"factorial\") {return factorial(_state_.attribute)}\\n            else if (b === \"primes\") {return primeNums(_state_.attribute)}\\n            else if (b === \"ints\") {return intArray(_state_.attribute)}\\n        }\\n    }\\n\\n    count = new Proxy (count, handlerGet); '),h(\"br\"),h(\"span.tao\",' \"count\" is a proxy of itself. Trying to get a value from it invokes \"handlerGet\", overriding the default behavior (throwing a ReferenceError). NOTE: In order to avoid future name clashes and reduce siliness in production code, I changed the definition of count to: '),h(\"span\",{style:{color:\"#ee00bb\"}},'\"const count = new Proxy ({}, handlerGet);\"'),h(\"span\",'. Mutating \"count = {}\" into a proxy of itself was for demonstration purposes only. Both versions function alike. '),h(\"br\"),h(\"h3\",{style:{color:\"#bbee00\"}},\"Function Call Trap\"),h(\"p\",' The behavior of functions can be modified with the \"apply\" trap. While \"get: (a,b,c) =>\" in a handler is \"get: (target object, key, value) =>\", \"apply: (a,b,c) =>\" is \"apply: (target function, single argument, argument list) =>\" '),h(\"p\",' As initially defined, f17() does nothing more than this: f17(a,b,c,d) -> [a,c,b+c,d]. Re-defined as a proxy of itself, f17 generates arrays of Fibonacci numbers. The default values of b, c, and d are 0, 1, and false respectively, so f17(n) is equivalent to f17(n,0,1,false), returning the Fibonacci numbers under \"n\". f17(n,0,1,true) returns an array of prime Fibonacci numbers under n. Here\\'s the code: '),h(\"div\",{style:{color:\"#FFAABB\"}},\"f17(x): \"+F_17),h(\"br\"),h(\"div\",{style:{color:\"#ffaabb\"}},\"f17(x,0,1,true): \"+F_18),h(\"br\"),h(\"span\",'Enter a number \"x\" here: '),h(\"input#fibNum\"),h(\"div\",\" The floor of the absolute value will be used. \"),h(\"p\",\" Here's the code: \"),h(\"pre\",{style:{color:\"#00DDDD\"}},\"    function primeNums(n) {\\n      var store  = [], i, j, primes = [];\\n      for (i = 2; i <= n; ++i) {\\n        if (!store [i]) {\\n          primes.push(i);\\n          for (j = i << 1; j <= n; j += i) {\\n            store[j] = true;\\n          }\\n        }\\n      }\\n      return primes;\\n    }\\n\\n    function f17 (c, a=0, b=1, d=false) {return [c, b, a+b,d]};\\n\\n    var fibHandler = {\\n        apply: function(a, b, c) {\\n             var ax = a(...c)\\n             var arr = [0];\\n            while (ax[2] < ax[0]) {\\n                ax = a(...ax);\\n                arr.push(ax[1]);\\n            }\\n            if (c[3]) {\\n                var prms = primeNums(c[0]);\\n                var prmFibs = prms.filter(v => arr.includes(v));\\n                return `The prime Fibonacci numbers up to ${c[0]} are ${prmFibs.join(', ')}`;\\n            }\\n            else return `The Fibonacci numbers up to ${ax[0]} are ${arr}`\\n        }\\n    }\\n\\n    f17 = new Proxy(f17, fibHandler)  \"),h(\"h3\",{style:{color:\"#bbee00\"}},\"Spreadsheet-like Behavior\"),h(\"p\",\" In spreadsheets, such as Microsoft's Excell, when a + b = c, changing a or b automatically changes c. Such behavior is easy to implement with proxies. \"),h(\"table\",{style:{color:\"#ffaa00\",fontSize:\"22px\"}},[h(\"tr\",[h(\"td\",\"A\"),h(\"td\",_state.a)]),h(\"tr\",[h(\"td\",\"B\"),h(\"td\",_state.b)]),h(\"tr\",[h(\"td\",\"SUM\"),h(\"td\",_state.sum)]),h(\"tr\",[h(\"td\",{style:{paddingRight:\"23px\"}},\"PRODUCT     \"),h(\"td\",_state.prod)])]),h(\"br\"),h(\"br\"),h(\"button#aplus\",{style:{fontSize:\"17px\"}},\" A + \"),h(\"button#aminus\",{style:{fontSize:\"17px\"}},\" A - \"),h(\"button#bplus\",{style:{fontSize:\"17px\"}},\" B + \"),h(\"button#bminus\",{style:{fontSize:\"17px\"}},\" B - \"),h(\"br\"),h(\"br\"),h(\"button#resetState\",{style:{fontSize:\"17px\"}},\" Reset \"),h(\"span\",{style:{paddingLeft:\"20px\"}},\"A :\"),h(\"input#stateA\"),h(\"span\",{style:{paddingLeft:\"20px\"}},\"B :\"),h(\"input#stateB\"),h(\"br\"),h(\"p\",\" Here's the code: \"),h(\"pre\",'  const _state = {a: 0, b: 0, sum: 0, prod: 0 }\\n\\n  function add_a () {this.a += 1}\\n  function subtract_a () {this.a -= 1}\\n\\n  function add_b () {this.b += 1}\\n  function subtract_b () {this.b -= 1}\\n\\n  function set_a (x) {this.a = x};\\n  function set_b (z) {this.b = z};\\n\\n  function sum () {this.sum = this.a + this.b}\\n  function prod () {this.prod = this.a * this.b}\\n\\n  function resetState () {this.a=0;this.b=0;this.sum=0;this.prod=0};\\n\\n  var handlerUpdate = {\\n      get: (a, b, c) => {\\n          if (b === \"add_a\") add_a.apply(_state)\\n          else if (b === \"add_b\") add_b.apply(_state)\\n          else if (b === \"subtract_a\") subtract_a.apply(_state)\\n          else if (b === \"subtract_b\") subtract_b.apply(_state)\\n          else if (b === \"resetState\") resetState.apply(_state)\\n          else if (b === \"resetState\") resetState.apply(_state)\\n          sum.apply(_state);\\n          prod.apply(_state);\\n          diffRender();\\n      }\\n  }\\n\\n  const _count = new Proxy ({}, handlerUpdate); '),h(\"p\",\" \"),h(\"a\",{props:{href:\"#proxy2\"}},\"Back to the first demonstration\"),h(\"span#comments\"),h(\"br\"),h(\"div#comment\"),h(\"h2\",{style:{color:\"red\"}},\"Comments\"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"div#com2\",{style:{display:\"inline\"}}),h(\"h3\",\"User Names\"),h(\"p\",\" When this page loads in the browser, a user name is automatically generated in order to establish a unique WebSocket connection. This makes it possible to exchange text messages with other group members, play the game, and work on a shared todo list. If you want to leave a comment, you need to log in with a user name and a password of your choice. Each can be a single character or you could use a hard-to-hack combination of alphabet letter, numbers, and special characters. The main requirement is that there be only one comma, and that it be placed between the name and the password. \"),h(\"p\",\"The server will keep your user name and password in a text file. If you use your saved user name and password sometime in the future, you will be able to edit or delete any comments you previously made. \"),h(\"p\",\" If you enter a user name that has not been recorded, you will be logged in as that user. The user name and password will be saved. This means that you do not need to first register and then log in. This is an all-in-one process. If you enter a recognized user name but the password does not match the password in the record, you will be asked to try again. \"),h(\"br\"),h(\"h3\",\"Register\"),h(\"span.red\",mMregister.x),h(\"input.register\",{style:{display:mMshowRegister.x}}),h(\"br\"),h(\"br\"),h(\"h3\",\"COMMENTS - One paragraph at a time.\"),h(\"textarea#comment\",{style:{width:\"60%\",height:\"90px\"}},\"\"),h(\"br\"),h(\"br\"),h(\"div\",commentMonad.html),h(\"p\",\" When this website loads, it receives from the server a string containing all of the comments. The string is saved in commentMonad.s[0]. The string is transformed into an array of comments which is saved in commentMonad.s]1]. \"),h(\"p\",\" When a comment is created, modified, or deleted, a WebSocket message goes to the server which performs some of its own housekeeping and broadcasts a message to all online browsers. It is received in messages$ and forwarded comments.js. \"),h(\"p\",\" The functions in the comments.js file mutate commentsMonad. There is no reason to create fresh instances of commentMonad, other than out of devout devotion to the doctrine of non-mutation. How silly that would be! Nothing touches commentMonad outside of the comments.js file; there is no danger. \"),h(\"p\",\" commentMonad stands in stark contrast to the gameMonad, which is never mutated although it sees much action during game play. Immutability is necessary for game history traversal. Here is the entire Comments.js file: \"),h(\"pre\",\"function showFunc (name, name2)\\n  {return name == name2 ? 'inline-block' : 'none'}\\n\\n  var MonadState3 = function MonadState3(g, state) {\\n    this.id = g;\\n    this.s = state;\\n    this.bnd = (func, ...args) => func(this.s, ...args);\\n    this.ret = function (a) {\\n      return window[this.id] = new MonadState(this.id, a);\\n    };\\n  }\\n\\n  bind2(n)(cubeP)(addP(3))(a=>a+ar[0]+ar[1]-18)(multP(1/3))\\n    (addP(-11))(()=>ar[1]+ar[2]+ar[3])(terminate) ;\\n\\n  var commentMonad = new MonadState3('commentMonad',   [ '', [] ]);\\n\\n  MonadState3.prototype.html = [];\\n\\n  MonadState3.prototype.init = function (str) { // fetch all comments\\n    this.s[0] = str;\\n    this.s[1] = this.s[0].split(\\\"<@>\\\");\\n    this.s[1] = this.s[1].filter(v => (v != \\\"\\\"));\\n    process(this.s[1]);\\n  }\\n\\n  MonadState3.prototype.append = function (str) {\\n    this.s[0] = this.s[0] + str;\\n    this.s[1] = this.s[0].split('<@>').filter(v => (v != \\\"\\\"));\\n    process(this.s[1]);\\n  }\\n\\n  MonadState3.prototype.edit = function (num,txt) {\\n    this.s[1].splice(num,1,txt);\\n    this.s[0] = this.s[1].join(\\\"<@>\\\");\\n    this.s[1] = this.s[0].split('<@>').filter(v => (v != \\\"\\\"));\\n    process(this.s[1]);\\n  };\\n\\n  MonadState3.prototype.remove = function (num) {\\n    this.s[1] = this.s[1].filter(v => v!== '');\\n    this.s[1].splice(num,1);\\n    this.s[0] = this.s[1].join(\\\"<@>\\\");\\n    this.html = process(this.s[1]);\\n    return this.html;\\n  };\\n\\n  function process (a) { //Assembles the HTML for display.\\n    var arr = a;\\n    mMcomments.ret([]);\\n    var n = -1;\\n    arr.map(a => {\\n      var x = a.split(\\\"<o>\\\");\\n      if (x.length != 2) x = ['malfunction', '8888']\\n      x[1] = x[1].replace(/<<>>/g, ',');\\n      show = showFunc(x[0], pMname.x);\\n      n+=1;\\n      mMcomments.bnd(push, h('div#'+n, [\\n        h('span', x[0] + ' commented: ' + x[1].replace(/<<>>/g, \\\",\\\")),\\n        h('br'),\\n        h('textarea#commit', {props: {cols: 55, rows: 2},\\n           style: {display: show }}, x[1]),\\n        h('button#deleteB', {props: {innerHTML: 'delete'},\\n       style: {display: show, fontSize:14}}),\\n        h('br' ),\\n        h('span', '***************************************************************')\\n      ]))\\n    })\\n  } \"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"p\",\" *************************************************************************************** \"),h(\"pre\",\"\\nvar compose = (...fns) =>\\nfns.reduceRight((prevFn, nextFn) =>\\n  (...args) => nextFn(prevFn(...args)),\\n  value => value\\n);\\n\\nvar example = compose(\\nval => { console.log(1, val); return val**2; },\\nval => { console.log(2, val); return val+=4; },\\nval => { console.log(3, val); return val*=2; }); \")])]))}},sources)}]);","extractedComments":[]}